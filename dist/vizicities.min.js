!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("THREE")):"function"==typeof define&&define.amd?define(["THREE"],t):"object"==typeof exports?exports.VIZI=t(require("THREE")):e.VIZI=t(e.THREE)}(this,function(e){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,__webpack_require__),o.loaded=!0,o.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=_interopRequireDefault(o),r=n(8),a=_interopRequireDefault(r),s=n(11),u=_interopRequireDefault(s),c={version:"0.3",World:i["default"],Controls:a["default"],EnvironmentLayer:u["default"]};t["default"]=c,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=r,n=a,o=!0,s=c=void 0}},r=n(2),a=_interopRequireDefault(r),s=n(3),u=_interopRequireDefault(s),c=function(e){function World(e){_classCallCheck(this,World),i(Object.getPrototypeOf(World.prototype),"constructor",this).call(this),this._layers=[],this._controls=[],this._initContainer(e),this._initEngine(),this._initEvents(),this._update()}return _inherits(World,e),o(World,[{key:"_initContainer",value:function(e){this._container=document.getElementById(e)}},{key:"_initEngine",value:function(){this._engine=(0,u["default"])(this._container)}},{key:"_initEvents",value:function(){this.on("controlsMoveEnd",this._onControlsMoveEnd)}},{key:"_onControlsMoveEnd",value:function(e){this._resetView(this.unproject(e))}},{key:"_resetView",value:function(e){this.emit("preResetView"),this._moveStart(),this._move(e),this._moveEnd(),this.emit("postResetView")}},{key:"_moveStart",value:function(){this.emit("moveStart")}},{key:"_move",value:function(e){this._lastPosition=e,this.emit("move",e)}},{key:"_moveEnd",value:function(){this.emit("moveEnd")}},{key:"_update",value:function(){var e=this._engine.clock.getDelta();window.requestAnimationFrame(this._update.bind(this)),this._controls.forEach(function(e){e.update()}),this.emit("preUpdate"),this._engine._update(e),this.emit("postUpdate")}},{key:"setView",value:function(e){return this._resetView(e),this}},{key:"getPosition",value:function(){return this._lastPosition}},{key:"project",value:function(e){}},{key:"unproject",value:function(e){}},{key:"addLayer",value:function(e){return e._addToWorld(this),this._layers.push(e),this._engine._scene.add(e._layer),this.emit("layerAdded",e),this}},{key:"removeLayer",value:function(e){}},{key:"addControls",value:function(e){return e._addToWorld(this),this._controls.push(e),this.emit("controlsAdded",e),this}},{key:"removeControls",value:function(e){}}]),World}(a["default"]);t["default"]=function(e){return new c(e)},e.exports=t["default"]},function(e,t,n){"use strict";function EE(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function EventEmitter(){}var o="function"!=typeof Object.create?"~":!1;EventEmitter.prototype._events=void 0,EventEmitter.prototype.listeners=function(e,t){var n=o?o+e:e,i=this._events&&this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var r=0,a=i.length,s=new Array(a);a>r;r++)s[r]=i[r].fn;return s},EventEmitter.prototype.emit=function(e,t,n,i,r,a){var s=o?o+e:e;if(!this._events||!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,r),!0;case 6:return l.fn.call(l.context,t,n,i,r,a),!0}for(c=1,u=new Array(f-1);f>c;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,p=l.length;for(c=0;p>c;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;default:if(!u)for(h=1,u=new Array(f-1);f>h;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},EventEmitter.prototype.on=function(e,t,n){var i=new EE(t,n||this),r=o?o+e:e;return this._events||(this._events=o?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],i]:this._events[r].push(i):this._events[r]=i,this},EventEmitter.prototype.once=function(e,t,n){var i=new EE(t,n||this,!0),r=o?o+e:e;return this._events||(this._events=o?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],i]:this._events[r].push(i):this._events[r]=i,this},EventEmitter.prototype.removeListener=function(e,t,n,i){var r=o?o+e:e;if(!this._events||!this._events[r])return this;var a=this._events[r],s=[];if(t)if(a.fn)(a.fn!==t||i&&!a.once||n&&a.context!==n)&&s.push(a);else for(var u=0,c=a.length;c>u;u++)(a[u].fn!==t||i&&!a[u].once||n&&a[u].context!==n)&&s.push(a[u]);return s.length?this._events[r]=1===s.length?s[0]:s:delete this._events[r],this},EventEmitter.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[o?o+e:e]:this._events=o?{}:Object.create(null),this):this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.prefixed=o,e.exports=EventEmitter},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=r,n=a,o=!0,s=c=void 0}},r=n(2),a=_interopRequireDefault(r),s=n(4),u=_interopRequireDefault(s),c=n(5),l=_interopRequireDefault(c),f=n(6),h=_interopRequireDefault(f),p=n(7),d=_interopRequireDefault(p),m=function(e){function Engine(e){_classCallCheck(this,Engine),console.log("Init Engine"),i(Object.getPrototypeOf(Engine.prototype),"constructor",this).call(this),this._scene=l["default"],this._renderer=(0,h["default"])(e),this._camera=(0,d["default"])(e),this.clock=new u["default"].Clock}return _inherits(Engine,e),o(Engine,[{key:"_update",value:function(e){this.emit("preRender"),this._renderer.render(this._scene,this._camera),this.emit("postRender")}}]),Engine}(a["default"]);t["default"]=function(e){return new m(e)},e.exports=t["default"]},function(t,n){t.exports=e},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=_interopRequireDefault(o);t["default"]=function(){var e=new i["default"].Scene;return e.fog=new i["default"].Fog(16777215,1,15e3),e}(),e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=_interopRequireDefault(o),r=n(5),a=_interopRequireDefault(r);t["default"]=function(e){var t=new i["default"].WebGLRenderer({antialias:!0});t.setClearColor(a["default"].fog.color,1),t.gammaInput=!0,t.gammaOutput=!0,e.appendChild(t.domElement);var n=function(){t.setSize(e.clientWidth,e.clientHeight)};return window.addEventListener("resize",n,!1),n(),t},e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=_interopRequireDefault(o);t["default"]=function(e){var t=new i["default"].PerspectiveCamera(40,1,1,4e4);t.position.z=400;var n=function(){t.aspect=e.clientWidth/e.clientHeight,t.updateProjectionMatrix()};return window.addEventListener("resize",n,!1),n(),t},e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),i=_interopRequireDefault(o),r={Orbit:i["default"]};t["default"]=r,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=r,n=a,o=!0,s=c=void 0}},r=n(2),a=_interopRequireDefault(r),s=n(4),u=_interopRequireDefault(s),c=n(10),l=_interopRequireDefault(c),f=(0,l["default"])(u["default"]),h=function(e){function Orbit(){_classCallCheck(this,Orbit),i(Object.getPrototypeOf(Orbit.prototype),"constructor",this).call(this)}return _inherits(Orbit,e),o(Orbit,[{key:"_initEvents",value:function(){var e=this;this._controls.addEventListener("start",function(t){e._world.emit("controlsMoveStart",t.target.center)}),this._controls.addEventListener("change",function(t){e._world.emit("controlsMove",t.target.center)}),this._controls.addEventListener("end",function(t){e._world.emit("controlsMoveEnd",t.target.center)})}},{key:"_panTo",value:function(e,t){}},{key:"_panBy",value:function(e,t){}},{key:"_zoomTo",value:function(e,t){}},{key:"_zoomBy",value:function(e,t){}},{key:"_lookAt",value:function(e,t){}},{key:"_lookAtTarget",value:function(){}},{key:"_tiltTo",value:function(e,t){}},{key:"_tiltBy",value:function(e,t){}},{key:"_rotateTo",value:function(e,t){}},{key:"_rotateBy",value:function(e,t){}},{key:"_flyTo",value:function(e,t){}},{key:"update",value:function(){this._controls.update()}},{key:"addTo",value:function(e){return e.addControls(this),this}},{key:"_addToWorld",value:function(e){this._world=e,this._controls=new f(e._engine._camera,e._container),this._controls.maxPolarAngle=Math.PI/2,this._initEvents(),this.emit("added")}}]),Orbit}(a["default"]);t["default"]=function(){return new h},e.exports=t["default"]},function(e,t){e.exports=function(e){function OrbitConstraint(t){this.object=t,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25;var n,o,i=this,r=1e-6,a=0,s=0,u=1,c=new e.Vector3,l=!1;this.getPolarAngle=function(){return o},this.getAzimuthalAngle=function(){return n},this.rotateLeft=function(e){s-=e},this.rotateUp=function(e){a-=e},this.panLeft=function(){var t=new e.Vector3;return function(e){var n=this.object.matrix.elements,i=e/Math.cos(o);t.set(n[0],0,n[2]).normalize(),t.multiplyScalar(-i),c.add(t)}}(),this.panUp=function(){var t=new e.Vector3;return function(e){var n=this.object.matrix.elements,i=e/Math.cos(o);t.set(n[8],0,n[10]).normalize(),t.multiplyScalar(-i),c.add(t)}}(),this.pan=function(t,n,o,r){if(i.object instanceof e.PerspectiveCamera){var a=i.object.position,s=a.clone().sub(i.target),u=s.length();u*=Math.tan(i.object.fov/2*Math.PI/180),i.panLeft(2*t*u/r),i.panUp(2*n*u/r)}else i.object instanceof e.OrthographicCamera?(i.panLeft(t*(i.object.right-i.object.left)/o),i.panUp(n*(i.object.top-i.object.bottom)/r)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(t){i.object instanceof e.PerspectiveCamera?u/=t:i.object instanceof e.OrthographicCamera?(i.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),i.object.updateProjectionMatrix(),l=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(t){i.object instanceof e.PerspectiveCamera?u*=t:i.object instanceof e.OrthographicCamera?(i.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),i.object.updateProjectionMatrix(),l=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(){var i=new e.Vector3,f=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),h=f.clone().inverse(),p=new e.Vector3,d=new e.Quaternion;return function(){var e=this.object.position;i.copy(e).sub(this.target),i.applyQuaternion(f),n=Math.atan2(i.x,i.z),o=Math.atan2(Math.sqrt(i.x*i.x+i.z*i.z),i.y),n+=s,o+=a,n=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,n)),o=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,o)),o=Math.max(r,Math.min(Math.PI-r,o));var t=i.length()*u;return t=Math.max(this.minDistance,Math.min(this.maxDistance,t)),this.target.add(c),i.x=t*Math.sin(o)*Math.sin(n),i.y=t*Math.cos(o),i.z=t*Math.sin(o)*Math.cos(n),i.applyQuaternion(h),e.copy(this.target).add(i),this.object.lookAt(this.target),this.enableDamping===!0?(s*=1-this.dampingFactor,a*=1-this.dampingFactor):(s=0,a=0),u=1,c.set(0,0,0),l||p.distanceToSquared(this.object.position)>r||8*(1-d.dot(this.object.quaternion))>r?(p.copy(this.object.position),d.copy(this.object.quaternion),l=!1,!0):!1}}()}function OrbitControls(t,n){function pan(e,t){var n=i.domElement===document?i.domElement.body:i.domElement;o.pan(e,t,n.clientWidth,n.clientHeight)}function getAutoRotationAngle(){return 2*Math.PI/60/60*i.autoRotateSpeed}function getZoomScale(){return Math.pow(.95,i.zoomSpeed)}function onMouseDown(e){if(i.enabled!==!1){if(e.preventDefault(),e.button===i.mouseButtons.ORBIT){if(i.enableRotate===!1)return;m=d.ROTATE,r.set(e.clientX,e.clientY)}else if(e.button===i.mouseButtons.ZOOM){if(i.enableZoom===!1)return;m=d.DOLLY,f.set(e.clientX,e.clientY)}else if(e.button===i.mouseButtons.PAN){if(i.enablePan===!1)return;m=d.PAN,u.set(e.clientX,e.clientY)}m!==d.NONE&&(document.addEventListener("mousemove",onMouseMove,!1),document.addEventListener("mouseup",onMouseUp,!1),i.dispatchEvent(_))}}function onMouseMove(e){if(i.enabled!==!1){e.preventDefault();var t=i.domElement===document?i.domElement.body:i.domElement;if(m===d.ROTATE){if(i.enableRotate===!1)return;a.set(e.clientX,e.clientY),s.subVectors(a,r),o.rotateLeft(2*Math.PI*s.x/t.clientWidth*i.rotateSpeed),o.rotateUp(2*Math.PI*s.y/t.clientHeight*i.rotateSpeed),r.copy(a)}else if(m===d.DOLLY){if(i.enableZoom===!1)return;h.set(e.clientX,e.clientY),p.subVectors(h,f),p.y>0?o.dollyIn(getZoomScale()):p.y<0&&o.dollyOut(getZoomScale()),f.copy(h)}else if(m===d.PAN){if(i.enablePan===!1)return;c.set(e.clientX,e.clientY),l.subVectors(c,u),pan(l.x,l.y),u.copy(c)}m!==d.NONE&&i.update()}}function onMouseUp(){i.enabled!==!1&&(document.removeEventListener("mousemove",onMouseMove,!1),document.removeEventListener("mouseup",onMouseUp,!1),i.dispatchEvent(b),m=d.NONE)}function onMouseWheel(e){if(i.enabled!==!1&&i.enableZoom!==!1&&m===d.NONE){e.preventDefault(),e.stopPropagation();var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?o.dollyOut(getZoomScale()):0>t&&o.dollyIn(getZoomScale()),i.update(),i.dispatchEvent(_),i.dispatchEvent(b)}}function onKeyDown(e){if(i.enabled!==!1&&i.enableKeys!==!1&&i.enablePan!==!1)switch(e.keyCode){case i.keys.UP:pan(0,i.keyPanSpeed),i.update();break;case i.keys.BOTTOM:pan(0,-i.keyPanSpeed),i.update();break;case i.keys.LEFT:pan(i.keyPanSpeed,0),i.update();break;case i.keys.RIGHT:pan(-i.keyPanSpeed,0),i.update()}}function touchstart(e){if(i.enabled!==!1){switch(e.touches.length){case 1:if(i.enableRotate===!1)return;m=d.TOUCH_ROTATE,r.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(i.enableZoom===!1)return;m=d.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);f.set(0,o);break;case 3:if(i.enablePan===!1)return;m=d.TOUCH_PAN,u.set(e.touches[0].pageX,e.touches[0].pageY);break;default:m=d.NONE}m!==d.NONE&&i.dispatchEvent(_)}}function touchmove(e){if(i.enabled!==!1){e.preventDefault(),e.stopPropagation();var t=i.domElement===document?i.domElement.body:i.domElement;switch(e.touches.length){case 1:if(i.enableRotate===!1)return;if(m!==d.TOUCH_ROTATE)return;a.set(e.touches[0].pageX,e.touches[0].pageY),s.subVectors(a,r),o.rotateLeft(2*Math.PI*s.x/t.clientWidth*i.rotateSpeed),o.rotateUp(2*Math.PI*s.y/t.clientHeight*i.rotateSpeed),r.copy(a),i.update();break;case 2:if(i.enableZoom===!1)return;if(m!==d.TOUCH_DOLLY)return;var n=e.touches[0].pageX-e.touches[1].pageX,v=e.touches[0].pageY-e.touches[1].pageY,_=Math.sqrt(n*n+v*v);h.set(0,_),p.subVectors(h,f),p.y>0?o.dollyOut(getZoomScale()):p.y<0&&o.dollyIn(getZoomScale()),f.copy(h),i.update();break;case 3:if(i.enablePan===!1)return;if(m!==d.TOUCH_PAN)return;c.set(e.touches[0].pageX,e.touches[0].pageY),l.subVectors(c,u),pan(l.x,l.y),u.copy(c),i.update();break;default:m=d.NONE}}}function touchend(){i.enabled!==!1&&(i.dispatchEvent(b),m=d.NONE)}function contextmenu(e){e.preventDefault()}var o=new OrbitConstraint(t);this.domElement=void 0!==n?n:document,Object.defineProperty(this,"constraint",{get:function(){return o}}),this.getPolarAngle=function(){return o.getPolarAngle()},this.getAzimuthalAngle=function(){return o.getAzimuthalAngle()},this.enabled=!0,this.center=this.target,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT};var i=this,r=new e.Vector2,a=new e.Vector2,s=new e.Vector2,u=new e.Vector2,c=new e.Vector2,l=new e.Vector2,f=new e.Vector2,h=new e.Vector2,p=new e.Vector2,d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},m=d.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var v={type:"change"},_={type:"start"},b={type:"end"};this.update=function(){this.autoRotate&&m===d.NONE&&o.rotateLeft(getAutoRotationAngle()),o.update()===!0&&this.dispatchEvent(v)},this.reset=function(){m=d.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(v),this.update()},this.dispose=function(){this.domElement.removeEventListener("contextmenu",contextmenu,!1),this.domElement.removeEventListener("mousedown",onMouseDown,!1),this.domElement.removeEventListener("mousewheel",onMouseWheel,!1),this.domElement.removeEventListener("MozMousePixelScroll",onMouseWheel,!1),this.domElement.removeEventListener("touchstart",touchstart,!1),this.domElement.removeEventListener("touchend",touchend,!1),this.domElement.removeEventListener("touchmove",touchmove,!1),document.removeEventListener("mousemove",onMouseMove,!1),document.removeEventListener("mouseup",onMouseUp,!1),window.removeEventListener("keydown",onKeyDown,!1)},this.domElement.addEventListener("contextmenu",contextmenu,!1),this.domElement.addEventListener("mousedown",onMouseDown,!1),this.domElement.addEventListener("mousewheel",onMouseWheel,!1),this.domElement.addEventListener("MozMousePixelScroll",onMouseWheel,!1),this.domElement.addEventListener("touchstart",touchstart,!1),this.domElement.addEventListener("touchend",touchend,!1),this.domElement.addEventListener("touchmove",touchmove,!1),window.addEventListener("keydown",onKeyDown,!1),this.update()}var t=e.MOUSE;return t||(t={LEFT:0,MIDDLE:1,RIGHT:2}),OrbitControls.prototype=Object.create(e.EventDispatcher.prototype),OrbitControls.prototype.constructor=OrbitControls,Object.defineProperties(OrbitControls.prototype,{object:{get:function(){return this.constraint.object}},target:{get:function(){return this.constraint.target},set:function(e){console.warn("THREE.OrbitControls: target is now immutable. Use target.set() instead."),this.constraint.target.copy(e)}},minDistance:{get:function(){return this.constraint.minDistance},set:function(e){this.constraint.minDistance=e}},maxDistance:{get:function(){return this.constraint.maxDistance},set:function(e){this.constraint.maxDistance=e}},minZoom:{get:function(){return this.constraint.minZoom},set:function(e){this.constraint.minZoom=e}},maxZoom:{get:function(){return this.constraint.maxZoom},set:function(e){this.constraint.maxZoom=e}},minPolarAngle:{get:function(){return this.constraint.minPolarAngle},set:function(e){this.constraint.minPolarAngle=e}},maxPolarAngle:{get:function(){return this.constraint.maxPolarAngle},set:function(e){this.constraint.maxPolarAngle=e}},minAzimuthAngle:{get:function(){return this.constraint.minAzimuthAngle},set:function(e){this.constraint.minAzimuthAngle=e}},maxAzimuthAngle:{get:function(){return this.constraint.maxAzimuthAngle},set:function(e){this.constraint.maxAzimuthAngle=e}},enableDamping:{get:function(){return this.constraint.enableDamping},set:function(e){this.constraint.enableDamping=e}},dampingFactor:{get:function(){return this.constraint.dampingFactor},set:function(e){this.constraint.dampingFactor=e}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=e}}}),OrbitControls}},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=r,n=a,o=!0,s=c=void 0}},r=n(12),a=_interopRequireDefault(r),s=n(4),u=_interopRequireDefault(s),c=function(e){function EnvironmentLayer(){_classCallCheck(this,EnvironmentLayer),i(Object.getPrototypeOf(EnvironmentLayer.prototype),"constructor",this).call(this),this._initLights(),this._initGrid()}return _inherits(EnvironmentLayer,e),o(EnvironmentLayer,[{key:"_initLights",value:function(){var e=new u["default"].DirectionalLight(10066329);e.intesity=.1,e.position.x=100,e.position.y=100,e.position.z=100;var t=new u["default"].DirectionalLight(10066329);t.intesity=.1,t.position.x=-100,t.position.y=100,t.position.z=-100;var n=new u["default"].DirectionalLightHelper(e,10),o=new u["default"].DirectionalLightHelper(t,10);this._layer.add(e),this._layer.add(t),this._layer.add(n),this._layer.add(o)}},{key:"_initGrid",value:function(){var e=4e3,t=100,n=new u["default"].GridHelper(e,t);this._layer.add(n)}}]),EnvironmentLayer}(a["default"]);t["default"]=function(){return new c},e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=r,n=a,o=!0,s=c=void 0}},r=n(2),a=_interopRequireDefault(r),s=n(4),u=_interopRequireDefault(s),c=n(5),l=(_interopRequireDefault(c),function(e){function Layer(){_classCallCheck(this,Layer),i(Object.getPrototypeOf(Layer.prototype),"constructor",this).call(this),this._layer=new u["default"].Object3D}return _inherits(Layer,e),o(Layer,[{key:"addTo",value:function(e){return e.addLayer(this),this}},{key:"_addToWorld",value:function(e){this._world=e,this.emit("added")}}]),Layer}(a["default"]));t["default"]=l,e.exports=t["default"]}])});
//# sourceMappingURL=vizicities.min.js.map
