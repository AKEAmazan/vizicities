!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("proj4"),require("THREE")):"function"==typeof define&&define.amd?define(["proj4","THREE"],t):"object"==typeof exports?exports.VIZI=t(require("proj4"),require("THREE")):e.VIZI=t(e.proj4,e.THREE)}(this,function(__WEBPACK_EXTERNAL_MODULE_22__,__WEBPACK_EXTERNAL_MODULE_24__){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=_interopRequireDefault(r),o=n(28),a=_interopRequireDefault(o),u=n(31),s=_interopRequireDefault(u),l=n(33),c=_interopRequireDefault(l),f=n(50),p=_interopRequireDefault(f),h=n(11),d=_interopRequireDefault(h),v=n(10),y=_interopRequireDefault(v),_={version:"0.3",World:i["default"],Controls:a["default"],EnvironmentLayer:s["default"],ImageTileLayer:c["default"],TopoJSONTileLayer:p["default"],Point:d["default"],LatLon:y["default"]};t["default"]=_,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,u=l=void 0}},o=n(2),a=_interopRequireDefault(o),u=n(3),s=_interopRequireDefault(u),l=n(6),c=_interopRequireDefault(l),f=n(11),p=_interopRequireDefault(f),h=n(10),d=_interopRequireDefault(h),v=n(23),y=_interopRequireDefault(v),_=function(e){function World(e,t){_classCallCheck(this,World),i(Object.getPrototypeOf(World.prototype),"constructor",this).call(this);var n={crs:c["default"].EPSG3857};this.options=(0,s["default"])(n,t),this._layers=[],this._controls=[],this._initContainer(e),this._initEngine(),this._initEvents(),this._update()}return _inherits(World,e),r(World,[{key:"_initContainer",value:function(e){this._container=document.getElementById(e)}},{key:"_initEngine",value:function(){this._engine=(0,y["default"])(this._container)}},{key:"_initEvents",value:function(){this.on("controlsMoveEnd",this._onControlsMoveEnd)}},{key:"_onControlsMoveEnd",value:function(e){var t=(0,p["default"])(e.x,e.z);this._resetView(this.pointToLatLon(t),t)}},{key:"_resetView",value:function(e,t){this.emit("preResetView"),this._moveStart(),this._move(e,t),this._moveEnd(),this.emit("postResetView")}},{key:"_moveStart",value:function(){this.emit("moveStart")}},{key:"_move",value:function(e,t){this._lastPosition=e,this.emit("move",e,t)}},{key:"_moveEnd",value:function(){this.emit("moveEnd")}},{key:"_update",value:function(){var e=this._engine.clock.getDelta();window.requestAnimationFrame(this._update.bind(this)),this._controls.forEach(function(e){e.update()}),this.emit("preUpdate"),this._engine.update(e),this.emit("postUpdate")}},{key:"setView",value:function(e){return this._originLatlon=e,this._originPoint=this.project(e),this._resetView(e),this}},{key:"getPosition",value:function(){return this._lastPosition}},{key:"project",value:function(e){return this.options.crs.latLonToPoint((0,d["default"])(e))}},{key:"unproject",value:function(e){return this.options.crs.pointToLatLon((0,p["default"])(e))}},{key:"latLonToPoint",value:function(e){var t=this.project((0,d["default"])(e));return t._subtract(this._originPoint)}},{key:"pointToLatLon",value:function(e){var t=(0,p["default"])(e).add(this._originPoint);return this.unproject(t)}},{key:"getCamera",value:function(){return this._engine._camera}},{key:"addLayer",value:function(e){return e._addToWorld(this),this._layers.push(e),this._engine._scene.add(e._layer),this.emit("layerAdded",e),this}},{key:"removeLayer",value:function(e){var t=this._layers.indexOf(e);return t>-1&&this._layers.splice(t,1),this._engine._scene.remove(e._layer),e.destroy(),this.emit("layerRemoved"),this}},{key:"addControls",value:function(e){return e._addToWorld(this),this._controls.push(e),this.emit("controlsAdded",e),this}},{key:"removeControls",value:function(e){}}]),World}(a["default"]);t["default"]=function(e,t){return new _(e,t)},e.exports=t["default"]},function(e,t,n){"use strict";function EE(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function EventEmitter(){}var r="function"!=typeof Object.create?"~":!1;EventEmitter.prototype._events=void 0,EventEmitter.prototype.listeners=function(e,t){var n=r?r+e:e,i=this._events&&this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,a=i.length,u=new Array(a);a>o;o++)u[o]=i[o].fn;return u},EventEmitter.prototype.emit=function(e,t,n,i,o,a){var u=r?r+e:e;if(!this._events||!this._events[u])return!1;var s,l,c=this._events[u],f=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,o),!0;case 6:return c.fn.call(c.context,t,n,i,o,a),!0}for(l=1,s=new Array(f-1);f>l;l++)s[l-1]=arguments[l];c.fn.apply(c.context,s)}else{var p,h=c.length;for(l=0;h>l;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;default:if(!s)for(p=1,s=new Array(f-1);f>p;p++)s[p-1]=arguments[p];c[l].fn.apply(c[l].context,s)}}return!0},EventEmitter.prototype.on=function(e,t,n){var i=new EE(t,n||this),o=r?r+e:e;return this._events||(this._events=r?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},EventEmitter.prototype.once=function(e,t,n){var i=new EE(t,n||this,!0),o=r?r+e:e;return this._events||(this._events=r?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},EventEmitter.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events||!this._events[o])return this;var a=this._events[o],u=[];if(t)if(a.fn)(a.fn!==t||i&&!a.once||n&&a.context!==n)&&u.push(a);else for(var s=0,l=a.length;l>s;s++)(a[s].fn!==t||i&&!a[s].once||n&&a[s].context!==n)&&u.push(a[s]);return u.length?this._events[o]=1===u.length?u[0]:u:delete this._events[o],this},EventEmitter.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[r?r+e:e]:this._events=r?{}:Object.create(null),this):this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.prefixed=r,e.exports=EventEmitter},function(e,t,n){function isIndex(e,t){return e="number"==typeof e||s.test(e)?+e:-1,t=null==t?o:t,e>-1&&e%1==0&&t>e}function assignValue(e,t,n){var r=e[t];(!eq(r,n)||eq(r,l[t])&&!c.call(e,t)||void 0===n&&!(t in e))&&(e[t]=n)}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function copyObject(e,t,n){return copyObjectWith(e,t,n)}function copyObjectWith(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],u=r?r(n[a],e[a],a,n,e):e[a];assignValue(n,a,u)}return n}function createAssigner(e){return i(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o="function"==typeof o?(i--,o):void 0,a&&isIterateeCall(n[0],n[1],a)&&(o=3>i?void 0:o,i=1),t=Object(t);++r<i;){var u=n[r];u&&e(t,u,r,o)}return t})}function isIterateeCall(e,t,n){if(!isObject(n))return!1;var r=typeof t;return("number"==r?isArrayLike(n)&&isIndex(t,n.length):"string"==r&&t in n)?eq(n[t],e):!1}function eq(e,t){return e===t||e!==e&&t!==t}function isArrayLike(e){return null!=e&&!("function"==typeof e&&isFunction(e))&&isLength(p(e))}function isFunction(e){var t=isObject(e)?f.call(e):"";return t==a||t==u}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&o>=e}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var r=n(4),i=n(5),o=9007199254740991,a="[object Function]",u="[object GeneratorFunction]",s=/^(?:0|[1-9]\d*)$/,l=Object.prototype,c=l.hasOwnProperty,f=l.toString,p=baseProperty("length"),h=createAssigner(function(e,t){copyObject(t,r(t),e)});e.exports=h},function(e,t){function baseTimes(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function isIndex(e,t){return e="number"==typeof e||u.test(e)?+e:-1,t=null==t?n:t,e>-1&&e%1==0&&t>e}function baseHas(e,t){return l.call(e,t)||"object"==typeof e&&t in e&&null===f(e)}function baseKeys(e){return h(Object(e))}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function indexKeys(e){var t=e?e.length:void 0;return isLength(t)&&(v(e)||isString(e)||isArguments(e))?baseTimes(t,String):null}function isPrototype(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||s;return e===n}function isArguments(e){return isArrayLikeObject(e)&&l.call(e,"callee")&&(!p.call(e,"callee")||c.call(e)==r)}function isArrayLike(e){return null!=e&&!("function"==typeof e&&isFunction(e))&&isLength(d(e))}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?c.call(e):"";return t==i||t==o}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&n>=e}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isString(e){return"string"==typeof e||!v(e)&&isObjectLike(e)&&c.call(e)==a}function keys(e){var t=isPrototype(e);if(!t&&!isArrayLike(e))return baseKeys(e);var n=indexKeys(e),r=!!n,i=n||[],o=i.length;for(var a in e)!baseHas(e,a)||r&&("length"==a||isIndex(a,o))||t&&"constructor"==a||i.push(a);return i}var n=9007199254740991,r="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",a="[object String]",u=/^(?:0|[1-9]\d*)$/,s=Object.prototype,l=s.hasOwnProperty,c=s.toString,f=Object.getPrototypeOf,p=s.propertyIsEnumerable,h=Object.keys,d=baseProperty("length"),v=Array.isArray;e.exports=keys},function(e,t){function apply(e,t,n){var r=n.length;switch(r){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function rest(e,t){if("function"!=typeof e)throw new TypeError(n);return t=v(void 0===t?e.length-1:toInteger(t),0),function(){for(var n=arguments,r=-1,i=v(n.length-t,0),o=Array(i);++r<i;)o[r]=n[t+r];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var a=Array(t+1);for(r=-1;++r<t;)a[r]=n[r];return a[t]=o,apply(e,this,a)}}function isFunction(e){var t=isObject(e)?d.call(e):"";return t==a||t==u}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function toInteger(e){if(!e)return 0===e?e:0;if(e=toNumber(e),e===r||e===-r){var t=0>e?-1:1;return t*i}var n=e%1;return e===e?n?e-n:e:0}function toNumber(e){if(isObject(e)){var t=isFunction(e.valueOf)?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=c.test(e);return n||f.test(e)?p(e.slice(2),n?2:8):l.test(e)?o:+e}var n="Expected a function",r=1/0,i=1.7976931348623157e308,o=NaN,a="[object Function]",u="[object GeneratorFunction]",s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,f=/^0o[0-7]+$/i,p=parseInt,h=Object.prototype,d=h.toString,v=Math.max;e.exports=rest},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=_interopRequireDefault(r),o=n(15),a=_interopRequireDefault(o),u=n(17),s=_interopRequireDefault(u),l=n(19),c=_interopRequireDefault(l),f=n(20),p=_interopRequireDefault(f),h={};h.EPSG3857=i["default"],h.EPSG900913=r.EPSG900913,h.EPSG3395=a["default"],h.EPSG4326=s["default"],h.Simple=c["default"],h.Proj4=p["default"],t["default"]=h,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=_interopRequireDefault(r),o=n(8),a=_interopRequireDefault(o),u=n(13),s=_interopRequireDefault(u),l=n(14),c=_interopRequireDefault(l),f={code:"EPSG:3857",projection:s["default"],transformScale:1/(Math.PI*s["default"].R),transformation:function(){var e=1/(Math.PI*s["default"].R);return new c["default"](e,0,-e,0)}()},p=(0,i["default"])({},a["default"],f),h=(0,i["default"])({},p,{code:"EPSG:900913"});t.EPSG900913=h,t["default"]=p},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=_interopRequireDefault(r),o=n(9),a=_interopRequireDefault(o),u=n(10),s=(_interopRequireDefault(u),{wrapLon:[-180,180],R:6378137,distance:function(e,t,n){var r,i,o,a=Math.PI/180;if(n){r=e.lat*a,i=t.lat*a;var u=e.lon*a,s=t.lon*a,l=i-r,c=s-u,f=l/2,p=c/2;o=Math.sin(f)*Math.sin(f)+Math.cos(r)*Math.cos(i)*Math.sin(p)*Math.sin(p);var h=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return this.R*h}return r=e.lat*a,i=t.lat*a,o=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((t.lon-e.lon)*a),this.R*Math.acos(Math.min(o,1))},pointScale:function(e,t){return this.projection.pointScale?this.projection.pointScale(e,t):[1,1]},metresToProjected:function(e,t){return e*t[1]},projectedToMetres:function(e,t){return e/t[1]},metresToWorld:function(e,t,n){var r=this.metresToProjected(e,t),i=this.scale(n);n&&(i/=2);var o=i*(this.transformScale*r)/t[1];return o},worldToMetres:function(e,t,n){var r=this.scale(n);n&&(r/=2);var i=e/r/this.transformScale*t[1],o=this.projectedToMetres(i,t);return o}});t["default"]=(0,i["default"])({},a["default"],s),e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=_interopRequireDefault(r),o=n(11),a=_interopRequireDefault(o),u=n(12),s=_interopRequireDefault(u),l={scaleFactor:1e6,latLonToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return t&&(r/=2),this.transformation._transform(n,r)},pointToLatLon:function(e,t){var n=this.scale(t);t&&(n/=2);var r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return e>=0?256*Math.pow(2,e):this.scaleFactor},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);e&&(n/=2);var r=this.transformation.transform((0,a["default"])(t[0]),n),i=this.transformation.transform((0,a["default"])(t[1]),n);return[r,i]},wrapLatLon:function(e){var t=this.wrapLat?(0,s["default"])(e.lat,this.wrapLat,!0):e.lat,n=this.wrapLon?(0,s["default"])(e.lon,this.wrapLon,!0):e.lon,r=e.alt;return(0,i["default"])(t,n,r)}};t["default"]=l,e.exports=t["default"]},function(e,t){function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=function(){function LatLon(e,t,n){if(_classCallCheck(this,LatLon),isNaN(e)||isNaN(t))throw new Error("Invalid LatLon object: ("+e+", "+t+")");this.lat=+e,this.lon=+t,void 0!==n&&(this.alt=+n)}return n(LatLon,[{key:"clone",value:function(){return new LatLon(this.lat,this.lon,this.alt)}}]),LatLon}();t["default"]=function(e,t,n){return e instanceof r?e:Array.isArray(e)&&"object"!=typeof e[0]?3===e.length?new r(e[0],e[1],e[2]):2===e.length?new r(e[0],e[1]):null:void 0===e||null===e?e:"object"==typeof e&&"lat"in e?new r(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new r(e,t,n)},e.exports=t["default"]},function(e,t){function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=function(){function Point(e,t,n){_classCallCheck(this,Point),this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}return n(Point,[{key:"clone",value:function(){return new Point(this.x,this.y)}},{key:"add",value:function(e){return this.clone()._add(i(e))}},{key:"_add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"subtract",value:function(e){return this.clone()._subtract(i(e))}},{key:"_subtract",value:function(e){return this.x-=e.x,this.y-=e.y,this}}]),Point}(),i=function(e,t,n){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):void 0===e||null===e?e:new r(e,t,n)};t["default"]=i,e.exports=t["default"]},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,n){var r=t[1],i=t[0],o=r-i;return e===r&&n?e:((e-i)%o+o)%o+i};t["default"]=n,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=_interopRequireDefault(r),o=n(11),a=_interopRequireDefault(o),u={R:6378137,MAX_LATITUDE:85.0511287798,ECC:.081819191,ECC2:.006694380015894481,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),i=Math.sin(r*t);return(0,a["default"])(this.R*e.lon*t,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(e){var t=180/Math.PI;return(0,i["default"])((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},pointScale:function(e,t){var n,r=Math.PI/180;if(t){var i=e.lat*r,o=(e.lon*r,this.R),a=Math.sin(i),u=a*a,s=Math.cos(i),l=o*(1-this.ECC2)/Math.pow(1-this.ECC2*u,1.5),c=o/Math.sqrt(1-this.ECC2*u),f=o/l/s;return n=o/c/s,[n,f]}return n=1/Math.cos(e.lat*r),[n,n]},bounds:function(){var e=6378137*Math.PI;return[[-e,-e],[e,e]]}()};t["default"]=u,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=n(11),o=_interopRequireDefault(i),a=function(){function Transformation(e,t,n,r){_classCallCheck(this,Transformation),this._a=e,this._b=t,this._c=n,this._d=r}return r(Transformation,[{key:"transform",value:function(e,t){return this._transform(e.clone(),t)}},{key:"_transform",value:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e}},{key:"untransform",value:function(e,t){return t=t||1,(0,o["default"])((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}}]),Transformation}();t["default"]=a,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=_interopRequireDefault(r),o=n(8),a=_interopRequireDefault(o),u=n(16),s=_interopRequireDefault(u),l=n(14),c=_interopRequireDefault(l),f={code:"EPSG:3395",projection:s["default"],transformScale:1/(Math.PI*s["default"].R),transformation:function(){var e=1/(Math.PI*s["default"].R);return new c["default"](e,0,-e,0)}()},p=(0,i["default"])({},a["default"],f);t["default"]=p,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=_interopRequireDefault(r),o=n(11),a=_interopRequireDefault(o),u={R:6378137,R_MINOR:6356752.314245179,ECC:.081819191,ECC2:.006694380015894481,project:function(e){var t=Math.PI/180,n=this.R,r=e.lat*t,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),u=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-u)/(1+u),o/2);return r=-n*Math.log(Math.max(s,1e-10)),(0,a["default"])(e.lon*t*n,r)},unproject:function(e){for(var t,n=180/Math.PI,r=this.R,o=this.R_MINOR/r,a=Math.sqrt(1-o*o),u=Math.exp(-e.y/r),s=Math.PI/2-2*Math.atan(u),l=0,c=.1;15>l&&Math.abs(c)>1e-7;l++)t=a*Math.sin(s),t=Math.pow((1-t)/(1+t),a/2),c=Math.PI/2-2*Math.atan(u*t)-s,s+=c;return(0,i["default"])(s*n,e.x*n/r)},pointScale:function(e){var t=Math.PI/180,n=e.lat*t,r=Math.sin(n),i=r*r,o=Math.cos(n),a=Math.sqrt(1-this.ECC2*i)/o;return[a,a]},bounds:[[-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]]};t["default"]=u,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=_interopRequireDefault(r),o=n(8),a=_interopRequireDefault(o),u=n(18),s=_interopRequireDefault(u),l=n(14),c=_interopRequireDefault(l),f={code:"EPSG:4326",projection:s["default"],transformScale:1/180,transformation:new c["default"](1/180,0,-1/180,0)},p=(0,i["default"])({},a["default"],f);t["default"]=p,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=_interopRequireDefault(r),o=n(11),a=_interopRequireDefault(o),u={project:function(e){return(0,a["default"])(e.lon,e.lat)},unproject:function(e){return(0,i["default"])(e.y,e.x)},pointScale:function(e){var t=111132.92,n=-559.82,r=1.175,i=-.0023,o=111412.84,a=-93.5,u=.118,s=Math.PI/180,l=e.lat*s,c=t+n*Math.cos(2*l)+r*Math.cos(4*l)+i*Math.cos(6*l),f=o*Math.cos(l)+a*Math.cos(3*l)+u*Math.cos(5*l);return[1/c,1/f]},bounds:[[-180,-90],[180,90]]};t["default"]=u,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=_interopRequireDefault(r),o=n(9),a=_interopRequireDefault(o),u=n(18),s=_interopRequireDefault(u),l=n(14),c=_interopRequireDefault(l),f={projection:s["default"],transformation:new c["default"](1,0,1,0),scale:function(e){return e?Math.pow(2,e):1},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lon-e.lon,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!0},p=(0,i["default"])({},a["default"],f);t["default"]=p,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=_interopRequireDefault(r),o=n(8),a=_interopRequireDefault(o),u=n(21),s=_interopRequireDefault(u),l=n(14),c=_interopRequireDefault(l),f=function(e,t,n){var r=(0,s["default"])(t,n),i=r.bounds[1][0]-r.bounds[0][0],o=r.bounds[1][1]-r.bounds[0][1],a=i/2,u=o/2,l=1/a,f=1/u,p=Math.min(l,f),h=p*(r.bounds[0][0]+a),d=p*(r.bounds[0][1]+u);return{code:e,projection:r,transformScale:p,transformation:new c["default"](p,-h,-p,d)}},p=function(e,t,n){return(0,i["default"])({},a["default"],f(e,t,n))};t["default"]=p,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),i=_interopRequireDefault(r),o=n(10),a=_interopRequireDefault(o),u=n(11),s=_interopRequireDefault(u),l=function(e,t){var n=(0,i["default"])(e),r=function(e){return(0,s["default"])(n.forward([e.lon,e.lat]))},o=function(e){var t=n.inverse([e.x,e.y]);return(0,a["default"])(t[1],t[0])};return{project:r,unproject:o,pointScale:function(e,t){return[1,1]},bounds:function(){if(t)return t;var e=r([-90,-180]),n=r([90,180]);return[e,n]}()}};t["default"]=l,e.exports=t["default"]},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_22__},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,u=l=void 0}},o=n(2),a=_interopRequireDefault(o),u=n(24),s=_interopRequireDefault(u),l=n(25),c=_interopRequireDefault(l),f=n(26),p=_interopRequireDefault(f),h=n(27),d=_interopRequireDefault(h),v=function(e){function Engine(e){_classCallCheck(this,Engine),console.log("Init Engine"),i(Object.getPrototypeOf(Engine.prototype),"constructor",this).call(this),this._scene=c["default"],this._renderer=(0,p["default"])(e),this._camera=(0,d["default"])(e),this.clock=new s["default"].Clock,this._frustum=new s["default"].Frustum}return _inherits(Engine,e),r(Engine,[{key:"update",value:function(e){this.emit("preRender"),this._renderer.render(this._scene,this._camera),this.emit("postRender")}}]),Engine}(a["default"]);t["default"]=function(e){return new v(e)},e.exports=t["default"]},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_24__},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=_interopRequireDefault(r);t["default"]=function(){var e=new i["default"].Scene;return e.fog=new i["default"].Fog(16777215,1,15e3),e}(),e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=_interopRequireDefault(r),o=n(25),a=_interopRequireDefault(o);t["default"]=function(e){var t=new i["default"].WebGLRenderer({antialias:!0});t.setClearColor(a["default"].fog.color,1),t.gammaInput=!0,t.gammaOutput=!0,e.appendChild(t.domElement);var n=function(){t.setSize(e.clientWidth,e.clientHeight)};return window.addEventListener("resize",n,!1),n(),t},e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=_interopRequireDefault(r);t["default"]=function(e){var t=new i["default"].PerspectiveCamera(45,1,1,4e4);t.position.y=400,t.position.z=400;var n=function(){t.aspect=e.clientWidth/e.clientHeight,t.updateProjectionMatrix()};return window.addEventListener("resize",n,!1),n(),t},e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(29),i=_interopRequireDefault(r),o={Orbit:i["default"]};t["default"]=o,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,u=l=void 0}},o=n(2),a=_interopRequireDefault(o),u=n(24),s=(_interopRequireDefault(u),n(30)),l=_interopRequireDefault(s),c=function(e){function Orbit(){_classCallCheck(this,Orbit),i(Object.getPrototypeOf(Orbit.prototype),"constructor",this).call(this)}return _inherits(Orbit,e),r(Orbit,[{key:"_initEvents",value:function(){var e=this;this._controls.addEventListener("start",function(t){e._world.emit("controlsMoveStart",t.target.target)}),this._controls.addEventListener("change",function(t){e._world.emit("controlsMove",t.target.target)}),this._controls.addEventListener("end",function(t){e._world.emit("controlsMoveEnd",t.target.target)})}},{key:"_panTo",value:function(e,t){}},{key:"_panBy",value:function(e,t){}},{key:"_zoomTo",value:function(e,t){}},{key:"_zoomBy",value:function(e,t){}},{key:"_lookAt",value:function(e,t){}},{key:"_lookAtTarget",value:function(){}},{key:"_tiltTo",value:function(e,t){}},{key:"_tiltBy",value:function(e,t){}},{key:"_rotateTo",value:function(e,t){}},{key:"_rotateBy",value:function(e,t){}},{key:"_flyTo",value:function(e,t){}},{key:"update",value:function(){this._controls.update()}},{key:"addTo",value:function(e){return e.addControls(this),this}},{key:"_addToWorld",value:function(e){this._world=e,this._controls=new l["default"](e._engine._camera,e._container),this._controls.keys=!1,this._controls.maxPolarAngle=1.5533,this._initEvents(),this.emit("added")}}]),Orbit}(a["default"]);t["default"]=function(){return new c},e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=_interopRequireDefault(r),o=function(e,t){function getAutoRotationAngle(){return 2*Math.PI/60/60*o.autoRotateSpeed}function getZoomScale(){return Math.pow(.95,o.zoomSpeed)}function rotateLeft(e){h-=e}function rotateUp(e){p-=e}function dollyIn(e){o.object instanceof i["default"].PerspectiveCamera?d/=e:o.object instanceof i["default"].OrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom*e)),o.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),
o.enableZoom=!1)}function dollyOut(e){o.object instanceof i["default"].PerspectiveCamera?d*=e:o.object instanceof i["default"].OrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/e)),o.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function handleMouseDownRotate(e){_.set(e.clientX,e.clientY)}function handleMouseDownDolly(e){E.set(e.clientX,e.clientY)}function handleMouseDownPan(e){b.set(e.clientX,e.clientY)}function handleMouseMoveRotate(e){m.set(e.clientX,e.clientY),g.subVectors(m,_);var t=o.domElement===document?o.domElement.body:o.domElement;rotateLeft(2*Math.PI*g.x/t.clientWidth*o.rotateSpeed),rotateUp(2*Math.PI*g.y/t.clientHeight*o.rotateSpeed),_.copy(m),o.update()}function handleMouseMoveDolly(e){O.set(e.clientX,e.clientY),M.subVectors(O,E),M.y>0?dollyIn(getZoomScale()):M.y<0&&dollyOut(getZoomScale()),E.copy(O),o.update()}function handleMouseMovePan(e){x.set(e.clientX,e.clientY),w.subVectors(x,b),R(w.x,w.y),b.copy(x),o.update()}function handleMouseUp(e){}function handleMouseWheel(e){var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?dollyOut(getZoomScale()):0>t&&dollyIn(getZoomScale()),o.update()}function handleKeyDown(e){switch(e.keyCode){case o.keys.UP:R(0,o.keyPanSpeed),o.update();break;case o.keys.BOTTOM:R(0,-o.keyPanSpeed),o.update();break;case o.keys.LEFT:R(o.keyPanSpeed,0),o.update();break;case o.keys.RIGHT:R(-o.keyPanSpeed,0),o.update()}}function handleTouchStartRotate(e){_.set(e.touches[0].pageX,e.touches[0].pageY)}function handleTouchStartDolly(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);E.set(0,r)}function handleTouchStartPan(e){b.set(e.touches[0].pageX,e.touches[0].pageY)}function handleTouchMoveRotate(e){m.set(e.touches[0].pageX,e.touches[0].pageY),g.subVectors(m,_);var t=o.domElement===document?o.domElement.body:o.domElement;rotateLeft(2*Math.PI*g.x/t.clientWidth*o.rotateSpeed),rotateUp(2*Math.PI*g.y/t.clientHeight*o.rotateSpeed),_.copy(m),o.update()}function handleTouchMoveDolly(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);O.set(0,r),M.subVectors(O,E),M.y>0?dollyOut(getZoomScale()):M.y<0&&dollyIn(getZoomScale()),E.copy(O),o.update()}function handleTouchMovePan(e){x.set(e.touches[0].pageX,e.touches[0].pageY),w.subVectors(x,b),R(w.x,w.y),b.copy(x),o.update()}function handleTouchEnd(e){}function onMouseDown(e){if(o.enabled!==!1){if(e.preventDefault(),e.button===o.mouseButtons.ORBIT){if(o.enableRotate===!1)return;handleMouseDownRotate(e),c=l.ROTATE}else if(e.button===o.mouseButtons.ZOOM){if(o.enableZoom===!1)return;handleMouseDownDolly(e),c=l.DOLLY}else if(e.button===o.mouseButtons.PAN){if(o.enablePan===!1)return;handleMouseDownPan(e),c=l.PAN}c!==l.NONE&&(document.addEventListener("mousemove",onMouseMove,!1),document.addEventListener("mouseup",onMouseUp,!1),document.addEventListener("mouseout",onMouseUp,!1),o.dispatchEvent(u))}}function onMouseMove(e){if(o.enabled!==!1)if(e.preventDefault(),c===l.ROTATE){if(o.enableRotate===!1)return;handleMouseMoveRotate(e)}else if(c===l.DOLLY){if(o.enableZoom===!1)return;handleMouseMoveDolly(e)}else if(c===l.PAN){if(o.enablePan===!1)return;handleMouseMovePan(e)}}function onMouseUp(e){o.enabled!==!1&&(handleMouseUp(e),document.removeEventListener("mousemove",onMouseMove,!1),document.removeEventListener("mouseup",onMouseUp,!1),document.removeEventListener("mouseout",onMouseUp,!1),o.dispatchEvent(s),c=l.NONE)}function onMouseWheel(e){o.enabled!==!1&&o.enableZoom!==!1&&c===l.NONE&&(e.preventDefault(),e.stopPropagation(),handleMouseWheel(e),o.dispatchEvent(u),o.dispatchEvent(s))}function onKeyDown(e){o.enabled!==!1&&o.enableKeys!==!1&&o.enablePan!==!1&&handleKeyDown(e)}function onTouchStart(e){if(o.enabled!==!1){switch(e.touches.length){case 1:if(o.enableRotate===!1)return;handleTouchStartRotate(e),c=l.TOUCH_ROTATE;break;case 2:if(o.enableZoom===!1)return;handleTouchStartDolly(e),c=l.TOUCH_DOLLY;break;case 3:if(o.enablePan===!1)return;handleTouchStartPan(e),c=l.TOUCH_PAN;break;default:c=l.NONE}c!==l.NONE&&o.dispatchEvent(u)}}function onTouchMove(e){if(o.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(o.enableRotate===!1)return;if(c!==l.TOUCH_ROTATE)return;handleTouchMoveRotate(e);break;case 2:if(o.enableZoom===!1)return;if(c!==l.TOUCH_DOLLY)return;handleTouchMoveDolly(e);break;case 3:if(o.enablePan===!1)return;if(c!==l.TOUCH_PAN)return;handleTouchMovePan(e);break;default:c=l.NONE}}function onTouchEnd(e){o.enabled!==!1&&(handleTouchEnd(e),o.dispatchEvent(s),c=l.NONE)}function onContextMenu(e){e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new i["default"].Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:i["default"].MOUSE.LEFT,ZOOM:i["default"].MOUSE.MIDDLE,PAN:i["default"].MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return r},this.getAzimuthalAngle=function(){return n},this.reset=function(){o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(a),o.update(),c=l.NONE},this.update=function(){var t=new i["default"].Vector3,u=(new i["default"].Quaternion).setFromUnitVectors(e.up,new i["default"].Vector3(0,1,0)),s=u.clone().inverse(),_=new i["default"].Vector3,m=new i["default"].Quaternion;return function(){var e=o.object.position;t.copy(e).sub(o.target),t.applyQuaternion(u),n=Math.atan2(t.x,t.z),r=Math.atan2(Math.sqrt(t.x*t.x+t.z*t.z),t.y),o.autoRotate&&c===l.NONE&&rotateLeft(getAutoRotationAngle()),n+=h,r+=p,n=Math.max(o.minAzimuthAngle,Math.min(o.maxAzimuthAngle,n)),r=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,r)),r=Math.max(f,Math.min(Math.PI-f,r));var i=t.length()*d;return i=Math.max(o.minDistance,Math.min(o.maxDistance,i)),o.target.add(v),t.x=i*Math.sin(r)*Math.sin(n),t.y=i*Math.cos(r),t.z=i*Math.sin(r)*Math.cos(n),t.applyQuaternion(s),e.copy(o.target).add(t),o.object.lookAt(o.target),o.enableDamping===!0?(h*=1-o.dampingFactor,p*=1-o.dampingFactor):(h=0,p=0),d=1,v.set(0,0,0),y||_.distanceToSquared(o.object.position)>f||8*(1-m.dot(o.object.quaternion))>f?(o.dispatchEvent(a),_.copy(o.object.position),m.copy(o.object.quaternion),y=!1,!0):!1}}(),this.dispose=function(){o.domElement.removeEventListener("contextmenu",onContextMenu,!1),o.domElement.removeEventListener("mousedown",onMouseDown,!1),o.domElement.removeEventListener("mousewheel",onMouseWheel,!1),o.domElement.removeEventListener("MozMousePixelScroll",onMouseWheel,!1),o.domElement.removeEventListener("touchstart",onTouchStart,!1),o.domElement.removeEventListener("touchend",onTouchEnd,!1),o.domElement.removeEventListener("touchmove",onTouchMove,!1),document.removeEventListener("mousemove",onMouseMove,!1),document.removeEventListener("mouseup",onMouseUp,!1),document.removeEventListener("mouseout",onMouseUp,!1),window.removeEventListener("keydown",onKeyDown,!1)};var n,r,o=this,a={type:"change"},u={type:"start"},s={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},c=l.NONE,f=1e-6,p=0,h=0,d=1,v=new i["default"].Vector3,y=!1,_=new i["default"].Vector2,m=new i["default"].Vector2,g=new i["default"].Vector2,b=new i["default"].Vector2,x=new i["default"].Vector2,w=new i["default"].Vector2,E=new i["default"].Vector2,O=new i["default"].Vector2,M=new i["default"].Vector2,P=function(){var e=new i["default"].Vector3;return function(t,n){var r=n.elements;e.set(r[0],0,r[2]),e.multiplyScalar(-t),v.add(e)}}(),j=function(){var e=new i["default"].Vector3;return function(t,n){var i=n.elements,o=t/Math.cos(r);e.set(i[4],0,i[6]),e.multiplyScalar(o),v.add(e)}}(),R=function(){var e=new i["default"].Vector3;return function(t,n){var r=o.domElement===document?o.domElement.body:o.domElement;if(o.object instanceof i["default"].PerspectiveCamera){var a=o.object.position;e.copy(a).sub(o.target);var u=e.length();u*=Math.tan(o.object.fov/2*Math.PI/180),P(2*t*u/r.clientHeight,o.object.matrix),j(2*n*u/r.clientHeight,o.object.matrix)}else o.object instanceof i["default"].OrthographicCamera?(P(t*(o.object.right-o.object.left)/r.clientWidth,o.object.matrix),j(n*(o.object.top-o.object.bottom)/r.clientHeight,o.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)}}();o.domElement.addEventListener("contextmenu",onContextMenu,!1),o.domElement.addEventListener("mousedown",onMouseDown,!1),o.domElement.addEventListener("mousewheel",onMouseWheel,!1),o.domElement.addEventListener("MozMousePixelScroll",onMouseWheel,!1),o.domElement.addEventListener("touchstart",onTouchStart,!1),o.domElement.addEventListener("touchend",onTouchEnd,!1),o.domElement.addEventListener("touchmove",onTouchMove,!1),window.addEventListener("keydown",onKeyDown,!1),this.update()};o.prototype=Object.create(i["default"].EventDispatcher.prototype),o.prototype.constructor=i["default"].OrbitControls,Object.defineProperties(o.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=e}}}),t["default"]=o,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,u=l=void 0}},o=n(32),a=_interopRequireDefault(o),u=n(24),s=_interopRequireDefault(u),l=function(e){function EnvironmentLayer(){_classCallCheck(this,EnvironmentLayer),i(Object.getPrototypeOf(EnvironmentLayer.prototype),"constructor",this).call(this),this._initLights()}return _inherits(EnvironmentLayer,e),r(EnvironmentLayer,[{key:"_onAdd",value:function(){}},{key:"_initLights",value:function(){var e=new s["default"].DirectionalLight(10066329);e.intesity=.1,e.position.x=100,e.position.y=100,e.position.z=100;var t=new s["default"].DirectionalLight(10066329);t.intesity=.1,t.position.x=-100,t.position.y=100,t.position.z=-100;var n=new s["default"].DirectionalLightHelper(e,10),r=new s["default"].DirectionalLightHelper(t,10);this._layer.add(e),this._layer.add(t),this._layer.add(n),this._layer.add(r)}},{key:"_initGrid",value:function(){var e=4e3,t=100,n=new s["default"].GridHelper(e,t);this._layer.add(n)}}]),EnvironmentLayer}(a["default"]);t["default"]=function(){return new l},e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,u=l=void 0}},o=n(2),a=_interopRequireDefault(o),u=n(24),s=_interopRequireDefault(u),l=n(25),c=(_interopRequireDefault(l),function(e){function Layer(){_classCallCheck(this,Layer),i(Object.getPrototypeOf(Layer.prototype),"constructor",this).call(this),this._layer=new s["default"].Object3D}return _inherits(Layer,e),r(Layer,[{key:"addTo",value:function(e){return e.addLayer(this),this}},{key:"_addToWorld",value:function(e){this._world=e,this._onAdd(e),this.emit("added")}},{key:"destroy",value:function(){this._world=null,this._layer=null}}]),Layer}(a["default"]));t["default"]=c,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,u=l=void 0}},o=n(34),a=_interopRequireDefault(o),u=n(44),s=_interopRequireDefault(u),l=n(47),c=_interopRequireDefault(l),f=n(48),p=_interopRequireDefault(f),h=n(24),d=_interopRequireDefault(h),v=function(e){function ImageTileLayer(e,t){_classCallCheck(this,ImageTileLayer),i(Object.getPrototypeOf(ImageTileLayer.prototype),"constructor",this).call(this,t),this._path=e}return _inherits(ImageTileLayer,e),r(ImageTileLayer,[{key:"_onAdd",value:function(e){var t=this;i(Object.getPrototypeOf(ImageTileLayer.prototype),"_onAdd",this).call(this,e);var n=new d["default"].PlaneBufferGeometry(4e4,4e4,1),r=new d["default"].Mesh(n,(0,c["default"])("#f5f5f3"));r.rotation.x=-90*Math.PI/180,this._baseLayer=r,this._layer.add(r),setTimeout(function(){t._calculateLOD(),t._initEvents()},0)}},{key:"_initEvents",value:function(){this._throttledWorldUpdate=(0,p["default"])(this._onWorldUpdate,100),this._world.on("preUpdate",this._throttledWorldUpdate,this),this._world.on("move",this._onWorldMove,this)}},{key:"_onWorldUpdate",value:function(){this._calculateLOD()}},{key:"_onWorldMove",value:function(e,t){this._moveBaseLayer(t)}},{key:"_moveBaseLayer",value:function(e){this._baseLayer.position.x=e.x,this._baseLayer.position.z=e.y}},{key:"_createTile",value:function(e,t){return(0,s["default"])(e,this._path,t)}},{key:"destroy",value:function(){this._world.off("preUpdate",this._throttledWorldUpdate),this._world.off("move",this._onWorldMove),this._throttledWorldUpdate=null,this._baseLayer.geometry.dispose(),this._baseLayer.geometry=null,this._baseLayer.material.map&&(this._baseLayer.material.map.dispose(),this._baseLayer.material.map=null),this._baseLayer.material.dispose(),this._baseLayer.material=null,this._baseLayer=null,i(Object.getPrototypeOf(ImageTileLayer.prototype),"destroy",this).call(this)}}]),ImageTileLayer}(a["default"]);t["default"]=function(e,t){return new v(e,t)},e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,u=l=void 0}},o=n(32),a=_interopRequireDefault(o),u=n(3),s=_interopRequireDefault(u),l=n(35),c=_interopRequireDefault(l),f=n(24),p=_interopRequireDefault(f),h=function(e){function TileLayer(e){var t=this;_classCallCheck(this,TileLayer),i(Object.getPrototypeOf(TileLayer.prototype),"constructor",this).call(this,e);var n={maxCache:1e3,maxLOD:18};this._options=(0,s["default"])(n,e),this._tileCache=(0,c["default"])(this._options.maxCache,function(e){t._destroyTile(e)}),this._minLOD=3,this._maxLOD=this._options.maxLOD,this._frustum=new p["default"].Frustum,this._tiles=new p["default"].Object3D}return _inherits(TileLayer,e),r(TileLayer,[{key:"_onAdd",value:function(e){this._layer.add(this._tiles)}},{key:"_updateFrustum",value:function(){var e=this._world.getCamera(),t=new p["default"].Matrix4;t.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromMatrix(e.projectionMatrix),this._frustum.setFromMatrix((new p["default"].Matrix4).multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse))}},{key:"_tileInFrustum",value:function(e){var t=e.getBounds();return this._frustum.intersectsBox(new p["default"].Box3(new p["default"].Vector3(t[0],0,t[3]),new p["default"].Vector3(t[2],0,t[1])))}},{key:"_calculateLOD",value:function(){var e=this;if(!this._stop&&this._world){var t=this._world.getCamera();this._updateFrustum(this._frustum,t);var n=this._checklist;n=[],n.push(this._requestTile("0",this)),n.push(this._requestTile("1",this)),n.push(this._requestTile("2",this)),n.push(this._requestTile("3",this)),this._divide(n),this._removeTiles(),n.forEach(function(n,r){if(e._tileInFrustum(n)){if(e._options.distance&&e._options.distance>0){var i=n.getCenter(),o=new p["default"].Vector3(i[0],0,i[1]).sub(t.position).length();if(o>e._options.distance)return}return n.getMesh()?void(n.isReady()&&e._tiles.add(n.getMesh())):void n.requestTileAsync()}})}}},{key:"_divide",value:function(e){for(var t,n,r=0;r!=e.length;)t=e[r],n=t.getQuadcode(),t.length!==this._maxLOD&&this._screenSpaceError(t)?(e.splice(r,1),e.push(this._requestTile(n+"0",this)),e.push(this._requestTile(n+"1",this)),e.push(this._requestTile(n+"2",this)),e.push(this._requestTile(n+"3",this))):r++}},{key:"_screenSpaceError",value:function(e){var t=this._minLOD,n=this._maxLOD,r=e.getQuadcode(),i=this._world.getCamera(),o=3;if(r.length===n)return!1;if(r.length<t)return!0;if(!this._tileInFrustum(e))return!1;var a=e.getCenter(),u=new p["default"].Vector3(a[0],0,a[1]).sub(i.position).length(),s=o*e.getSide()/u;return s>1}},{key:"_removeTiles",value:function(){for(var e=this._tiles.children.length-1;e>=0;e--)this._tiles.remove(this._tiles.children[e])}},{key:"_createTile",value:function(e,t){}},{key:"_requestTile",value:function(e,t){var n=this._tileCache.getTile(e);return n||(n=this._createTile(e,t),this._tileCache.setTile(e,n)),n}},{key:"_destroyTile",value:function(e){this._layer.remove(e),e.destroy()}},{key:"destroy",value:function(){var e;for(e=this._tiles.children.length-1;e>=0;e--)this._tiles.remove(this._tiles.children[e]);for(e=this._layer.children.length-1;e>=0;e--)this._layer.remove(this._layer.children[e]);this._tileCache.destroy(),this._tileCache=null,this._world=null,this._tiles=null,this._layer=null,this._frustum=null}}]),TileLayer}(a["default"]);t["default"]=h,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=n(36),o=_interopRequireDefault(i),a=function(){function TileCache(e,t){_classCallCheck(this,TileCache),this._cache=(0,o["default"])({max:e,dispose:function(e,n){t(n)}})}return r(TileCache,[{key:"isReady",value:function(){return!1}},{key:"getTile",value:function(e){return this._cache.get(e)}},{key:"setTile",value:function(e,t){this._cache.set(e,t)}},{key:"destroy",value:function(){this._cache.reset(),this._cache=null}}]),TileCache}();t["default"]=function(e,t){return new a(e,t)},e.exports=t["default"]},function(e,t,n){function priv(e,t,n){var i;return u[t]?i=u[t]:(i=r(t),u[t]=i),2===arguments.length?e[i]:(e[i]=n,n)}function naiveLength(){return 1}function LRUCache(e){if(!(this instanceof LRUCache))return new LRUCache(e);"number"==typeof e&&(e={max:e}),e||(e={});var t=priv(this,"max",e.max);(!t||"number"!=typeof t||0>=t)&&priv(this,"max",1/0);var n=e.length||naiveLength;"function"!=typeof n&&(n=naiveLength),priv(this,"lengthCalculator",n),priv(this,"allowStale",e.stale||!1),priv(this,"maxAge",e.maxAge||0),priv(this,"dispose",e.dispose),this.reset()}function forEachStep(e,t,n,r){var i=n.value;isStale(e,i)&&(del(e,n),priv(e,"allowStale")||(i=void 0)),i&&t.call(r,i.value,i.key,e)}function get(e,t,n){var r=priv(e,"cache").get(t);if(r){var i=r.value;isStale(e,i)?(del(e,r),priv(e,"allowStale")||(i=void 0)):n&&priv(e,"lruList").unshiftNode(r),i&&(i=i.value)}return i}function isStale(e,t){if(!t||!t.maxAge&&!priv(e,"maxAge"))return!1;var n=!1,r=Date.now()-t.now;return n=t.maxAge?r>t.maxAge:priv(e,"maxAge")&&r>priv(e,"maxAge")}function trim(e){if(priv(e,"length")>priv(e,"max"))for(var t=priv(e,"lruList").tail;priv(e,"length")>priv(e,"max")&&null!==t;){var n=t.prev;del(e,t),t=n}}function del(e,t){if(t){var n=t.value;priv(e,"dispose")&&priv(e,"dispose").call(this,n.key,n.value),priv(e,"length",priv(e,"length")-n.length),priv(e,"cache")["delete"](n.key),priv(e,"lruList").removeNode(t)}}function Entry(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}e.exports=LRUCache;var r,i=n(37),o=n(40),a=n(43),u={},s="function"==typeof Symbol;r=s?function(e){return Symbol["for"](e)}:function(e){return"_"+e},Object.defineProperty(LRUCache.prototype,"max",{set:function(e){(!e||"number"!=typeof e||0>=e)&&(e=1/0),priv(this,"max",e),trim(this)},get:function(){return priv(this,"max")},enumerable:!0}),Object.defineProperty(LRUCache.prototype,"allowStale",{set:function(e){priv(this,"allowStale",!!e)},get:function(){return priv(this,"allowStale")},enumerable:!0}),Object.defineProperty(LRUCache.prototype,"maxAge",{set:function(e){(!e||"number"!=typeof e||0>e)&&(e=0),priv(this,"maxAge",e),trim(this)},get:function(){return priv(this,"maxAge")},enumerable:!0}),Object.defineProperty(LRUCache.prototype,"lengthCalculator",{set:function(e){"function"!=typeof e&&(e=naiveLength),e!==priv(this,"lengthCalculator")&&(priv(this,"lengthCalculator",e),priv(this,"length",0),priv(this,"lruList").forEach(function(e){e.length=priv(this,"lengthCalculator").call(this,e.value,e.key),priv(this,"length",priv(this,"length")+e.length)},this)),trim(this)},get:function(){return priv(this,"lengthCalculator")},enumerable:!0}),Object.defineProperty(LRUCache.prototype,"length",{get:function(){return priv(this,"length")},enumerable:!0}),Object.defineProperty(LRUCache.prototype,"itemCount",{get:function(){return priv(this,"lruList").length},enumerable:!0}),LRUCache.prototype.rforEach=function(e,t){t=t||this;for(var n=priv(this,"lruList").tail;null!==n;){var r=n.prev;forEachStep(this,e,n,t),n=r}},LRUCache.prototype.forEach=function(e,t){t=t||this;for(var n=priv(this,"lruList").head;null!==n;){var r=n.next;forEachStep(this,e,n,t),n=r}},LRUCache.prototype.keys=function(){return priv(this,"lruList").toArray().map(function(e){return e.key},this)},LRUCache.prototype.values=function(){return priv(this,"lruList").toArray().map(function(e){return e.value},this)},LRUCache.prototype.reset=function(){priv(this,"dispose")&&priv(this,"lruList")&&priv(this,"lruList").length&&priv(this,"lruList").forEach(function(e){priv(this,"dispose").call(this,e.key,e.value)},this),priv(this,"cache",new i),priv(this,"lruList",new a),priv(this,"length",0)},LRUCache.prototype.dump=function(){return priv(this,"lruList").map(function(e){return isStale(this,e)?void 0:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}},this).toArray().filter(function(e){return e})},LRUCache.prototype.dumpLru=function(){return priv(this,"lruList")},LRUCache.prototype.inspect=function(e,t){var n="LRUCache {",r=!1,i=priv(this,"allowStale");i&&(n+="\n  allowStale: true",r=!0);var a=priv(this,"max");a&&a!==1/0&&(r&&(n+=","),n+="\n  max: "+o.inspect(a,t),r=!0);var u=priv(this,"maxAge");u&&(r&&(n+=","),n+="\n  maxAge: "+o.inspect(u,t),r=!0);var s=priv(this,"lengthCalculator");s&&s!==naiveLength&&(r&&(n+=","),n+="\n  length: "+o.inspect(priv(this,"length"),t),r=!0);var l=!1;return priv(this,"lruList").forEach(function(e){l?n+=",\n  ":(r&&(n+=",\n"),l=!0,n+="\n  ");var i=o.inspect(e.key).split("\n").join("\n  "),a={value:e.value};e.maxAge!==u&&(a.maxAge=e.maxAge),s!==naiveLength&&(a.length=e.length),isStale(this,e)&&(a.stale=!0),a=o.inspect(a,t).split("\n").join("\n  "),n+=i+" => "+a}),(l||r)&&(n+="\n"),n+="}"},LRUCache.prototype.set=function(e,t,n){n=n||priv(this,"maxAge");var r=n?Date.now():0,i=priv(this,"lengthCalculator").call(this,t,e);if(priv(this,"cache").has(e)){if(i>priv(this,"max"))return del(this,priv(this,"cache").get(e)),!1;var o=priv(this,"cache").get(e),a=o.value;return priv(this,"dispose")&&priv(this,"dispose").call(this,e,a.value),a.now=r,a.maxAge=n,a.value=t,priv(this,"length",priv(this,"length")+(i-a.length)),a.length=i,this.get(e),trim(this),!0}var u=new Entry(e,t,i,r,n);return u.length>priv(this,"max")?(priv(this,"dispose")&&priv(this,"dispose").call(this,e,t),!1):(priv(this,"length",priv(this,"length")+u.length),priv(this,"lruList").unshift(u),priv(this,"cache").set(e,priv(this,"lruList").head),trim(this),!0)},LRUCache.prototype.has=function(e){if(!priv(this,"cache").has(e))return!1;var t=priv(this,"cache").get(e).value;return isStale(this,t)?!1:!0},LRUCache.prototype.get=function(e){return get(this,e,!0)},LRUCache.prototype.peek=function(e){return get(this,e,!1)},LRUCache.prototype.pop=function(){var e=priv(this,"lruList").tail;return e?(del(this,e),e.value):null},LRUCache.prototype.del=function(e){del(this,priv(this,"cache").get(e))},LRUCache.prototype.load=function(e){this.reset();for(var t=Date.now(),n=e.length-1;n>=0;n--){var r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{var o=i-t;o>0&&this.set(r.k,r.v,o)}}},LRUCache.prototype.prune=function(){var e=this;priv(this,"cache").forEach(function(t,n){get(e,n,!1)})}},function(e,t,n){(function(t){"pseudomap"===t.env.npm_package_name&&"test"===t.env.npm_lifecycle_script&&(t.env.TEST_PSEUDOMAP="true"),"function"!=typeof Map||t.env.TEST_PSEUDOMAP?e.exports=n(39):e.exports=Map}).call(t,n(38))},function(e,t){function cleanUpNextTick(){o=!1,n.length?i=n.concat(i):a=-1,i.length&&drainQueue()}function drainQueue(){if(!o){var e=setTimeout(cleanUpNextTick);o=!0;for(var t=i.length;t;){for(n=i,i=[];++a<t;)n&&n[a].run();a=-1,t=i.length}n=null,o=!1,clearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var n,r=e.exports={},i=[],o=!1,a=-1;r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];i.push(new Item(e,t)),1!==i.length||o||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=noop,r.addListener=noop,r.once=noop,r.off=noop,r.removeListener=noop,r.removeAllListeners=noop,r.emit=noop,r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t){function PseudoMap(e){if(!(this instanceof PseudoMap))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),e)if(e instanceof PseudoMap||"function"==typeof Map&&e instanceof Map)e.forEach(function(e,t){this.set(t,e)},this);else{if(!Array.isArray(e))throw new TypeError("invalid argument");e.forEach(function(e){this.set(e[0],e[1])},this)}}function same(e,t){return e===t||e!==e&&t!==t}function Entry(e,t,n){this.key=e,this.value=t,this._index=n}function find(e,t){for(var r=0,i="_"+t,o=i;n.call(e,o);o=i+r++)if(same(e[o].key,t))return e[o]}function set(e,t,r){
for(var i=0,o="_"+t,a=o;n.call(e,a);a=o+i++)if(same(e[a].key,t))return void(e[a].value=r);e.size++,e[a]=new Entry(t,r,a)}var n=Object.prototype.hasOwnProperty;e.exports=PseudoMap,PseudoMap.prototype.forEach=function(e,t){t=t||this,Object.keys(this._data).forEach(function(n){"size"!==n&&e.call(t,this._data[n].value,this._data[n].key)},this)},PseudoMap.prototype.has=function(e){return!!find(this._data,e)},PseudoMap.prototype.get=function(e){var t=find(this._data,e);return t&&t.value},PseudoMap.prototype.set=function(e,t){set(this._data,e,t)},PseudoMap.prototype["delete"]=function(e){var t=find(this._data,e);t&&(delete this._data[t._index],this._data.size--)},PseudoMap.prototype.clear=function(){var e=Object.create(null);e.size=0,Object.defineProperty(this,"_data",{value:e,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(PseudoMap.prototype,"size",{get:function(){return this._data.size},set:function(e){},enumerable:!0,configurable:!0}),PseudoMap.prototype.values=PseudoMap.prototype.keys=PseudoMap.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},function(e,t,n){(function(e,r){function inspect(e,n){var r={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),isBoolean(n)?r.showHidden=n:n&&t._extend(r,n),isUndefined(r.showHidden)&&(r.showHidden=!1),isUndefined(r.depth)&&(r.depth=2),isUndefined(r.colors)&&(r.colors=!1),isUndefined(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=stylizeWithColor),formatValue(r,e,r.depth)}function stylizeWithColor(e,t){var n=inspect.styles[t];return n?"["+inspect.colors[n][0]+"m"+e+"["+inspect.colors[n][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function formatValue(e,n,r){if(e.customInspect&&n&&isFunction(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return isString(i)||(i=formatValue(e,i,r)),i}var o=formatPrimitive(e,n);if(o)return o;var a=Object.keys(n),u=arrayToHash(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),isError(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return formatError(n);if(0===a.length){if(isFunction(n)){var s=n.name?": "+n.name:"";return e.stylize("[Function"+s+"]","special")}if(isRegExp(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(isDate(n))return e.stylize(Date.prototype.toString.call(n),"date");if(isError(n))return formatError(n)}var l="",c=!1,f=["{","}"];if(isArray(n)&&(c=!0,f=["[","]"]),isFunction(n)){var p=n.name?": "+n.name:"";l=" [Function"+p+"]"}if(isRegExp(n)&&(l=" "+RegExp.prototype.toString.call(n)),isDate(n)&&(l=" "+Date.prototype.toUTCString.call(n)),isError(n)&&(l=" "+formatError(n)),0===a.length&&(!c||0==n.length))return f[0]+l+f[1];if(0>r)return isRegExp(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var h;return h=c?formatArray(e,n,r,u,a):a.map(function(t){return formatProperty(e,n,r,u,t,c)}),e.seen.pop(),reduceToSingleString(h,l,f)}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return isNumber(t)?e.stylize(""+t,"number"):isBoolean(t)?e.stylize(""+t,"boolean"):isNull(t)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,n,r,i){for(var o=[],a=0,u=t.length;u>a;++a)hasOwnProperty(t,String(a))?o.push(formatProperty(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,t,n,r,i,!0))}),o}function formatProperty(e,t,n,r,i,o){var a,u,s;if(s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},s.get?u=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(u=e.stylize("[Setter]","special")),hasOwnProperty(r,i)||(a="["+i+"]"),u||(e.seen.indexOf(s.value)<0?(u=isNull(n)?formatValue(e,s.value,null):formatValue(e,s.value,n-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),isUndefined(a)){if(o&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function reduceToSingleString(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return 10>e?"0"+e.toString(10):e.toString(10)}function timestamp(){var e=new Date,t=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),u[e.getMonth()],t].join(" ")}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i=/%[sdj%]/g;t.format=function(e){if(!isString(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(inspect(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),u=r[n];o>n;u=r[++n])a+=isNull(u)||!isObject(u)?" "+u:" "+inspect(u);return a},t.deprecate=function(n,i){function deprecated(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}if(isUndefined(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(r.noDeprecation===!0)return n;var o=!1;return deprecated};var o,a={};t.debuglog=function(e){if(isUndefined(o)&&(o=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=r.pid;a[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else a[e]=function(){};return a[e]},t.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=isArray,t.isBoolean=isBoolean,t.isNull=isNull,t.isNullOrUndefined=isNullOrUndefined,t.isNumber=isNumber,t.isString=isString,t.isSymbol=isSymbol,t.isUndefined=isUndefined,t.isRegExp=isRegExp,t.isObject=isObject,t.isDate=isDate,t.isError=isError,t.isFunction=isFunction,t.isPrimitive=isPrimitive,t.isBuffer=n(41);var u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",timestamp(),t.format.apply(t,arguments))},t.inherits=n(42),t._extend=function(e,t){if(!t||!isObject(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,function(){return this}(),n(38))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){function Yallist(e){var t=this;if(t instanceof Yallist||(t=new Yallist),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var n=0,r=arguments.length;r>n;n++)t.push(arguments[n]);return t}function push(e,t){e.tail=new Node(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function unshift(e,t){e.head=new Node(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Node(e,t,n,r){return this instanceof Node?(this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,void(n?(n.prev=this,this.next=n):this.next=null)):new Node(e,t,n,r)}e.exports=Yallist,Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null},Yallist.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},Yallist.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},Yallist.prototype.push=function(){for(var e=0,t=arguments.length;t>e;e++)push(this,arguments[e]);return this.length},Yallist.prototype.unshift=function(){for(var e=0,t=arguments.length;t>e;e++)unshift(this,arguments[e]);return this.length},Yallist.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail.next=null,this.length--,e}},Yallist.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head.prev=null,this.length--,e}},Yallist.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},Yallist.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},Yallist.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&e>t;t++)n=n.next;return t===e&&null!==n?n.value:void 0},Yallist.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&e>t;t++)n=n.prev;return t===e&&null!==n?n.value:void 0},Yallist.prototype.map=function(e,t){t=t||this;for(var n=new Yallist,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},Yallist.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Yallist,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},Yallist.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},Yallist.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},Yallist.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},Yallist.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},Yallist.prototype.slice=function(e,t){t=t||this.length,0>t&&(t+=this.length),e=e||0,0>e&&(e+=this.length);var n=new Yallist;if(e>t||0>t)return n;0>e&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&e>r;r++)i=i.next;for(;null!==i&&t>r;r++,i=i.next)n.push(i.value);return n},Yallist.prototype.sliceReverse=function(e,t){t=t||this.length,0>t&&(t+=this.length),e=e||0,0>e&&(e+=this.length);var n=new Yallist;if(e>t||0>t)return n;0>e&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&r>t;r--)i=i.prev;for(;null!==i&&r>e;r--,i=i.prev)n.push(i.value);return n},Yallist.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this}},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,u=l=void 0}},o=n(45),a=_interopRequireDefault(o),u=n(46),s=(_interopRequireDefault(u),n(24)),l=_interopRequireDefault(s),c=function(e){function ImageTile(e,t,n){_classCallCheck(this,ImageTile),i(Object.getPrototypeOf(ImageTile.prototype),"constructor",this).call(this,e,t,n)}return _inherits(ImageTile,e),r(ImageTile,[{key:"requestTileAsync",value:function(){var e=this;setTimeout(function(){e._mesh||(e._mesh=e._createMesh(),e._requestTile())},0)}},{key:"destroy",value:function(){this._abortRequest(),this._image=null,i(Object.getPrototypeOf(ImageTile.prototype),"destroy",this).call(this)}},{key:"_createMesh",value:function(){if(this._center){var e=new l["default"].Object3D,t=new l["default"].PlaneBufferGeometry(this._side,this._side,1),n=new l["default"].MeshBasicMaterial({depthWrite:!1}),r=new l["default"].Mesh(t,n);return r.rotation.x=-90*Math.PI/180,e.add(r),e.renderOrder=0,e.position.x=this._center[0],e.position.z=this._center[1],e}}},{key:"_createDebugMesh",value:function(){var e=document.createElement("canvas");e.width=256,e.height=256;var t=e.getContext("2d");t.font="Bold 20px Helvetica Neue, Verdana, Arial",t.fillStyle="#ff0000",t.fillText(this._quadcode,20,e.width/2-5),t.fillText(this._tile.toString(),20,e.width/2+25);var n=new l["default"].Texture(e);n.magFilter=l["default"].LinearFilter,n.minFilter=l["default"].LinearMipMapLinearFilter,n.anisotropy=4,n.needsUpdate=!0;var r=new l["default"].MeshBasicMaterial({map:n,transparent:!0,depthWrite:!1}),i=new l["default"].PlaneBufferGeometry(this._side,this._side,1),o=new l["default"].Mesh(i,r);return o.rotation.x=-90*Math.PI/180,o.position.y=.1,o}},{key:"_requestTile",value:function(){var e=this,t={x:this._tile[0],y:this._tile[1],z:this._tile[2]},n=this._getTileURL(t),r=document.createElement("img");r.addEventListener("load",function(t){var n=new l["default"].Texture;n.image=r,n.needsUpdate=!0,n.magFilter=l["default"].LinearFilter,n.minFilter=l["default"].LinearMipMapLinearFilter,n.anisotropy=4,n.needsUpdate=!0,e._mesh&&e._mesh.children[0]&&e._mesh.children[0].material&&(e._mesh.children[0].material.map=n,e._mesh.children[0].material.needsUpdate=!0,e._texture=n,e._ready=!0)},!1),r.crossOrigin="",r.src=n,this._image=r}},{key:"_abortRequest",value:function(){this._image&&(this._image.src="")}}]),ImageTile}(a["default"]);t["default"]=function(e,t,n){return new c(e,t,n)},e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=n(10),o=_interopRequireDefault(i),a=n(24),u=_interopRequireDefault(a),l=180/Math.PI,c=/\{([szxy])\}/g,f=function(){function Tile(e,t,n){_classCallCheck(this,Tile),this._layer=n,this._quadcode=e,this._path=t,this._ready=!1,this._tile=this._quadcodeToTile(e),this._boundsLatLon=this._tileBoundsWGS84(this._tile),this._boundsWorld=this._tileBoundsFromWGS84(this._boundsLatLon),this._center=this._boundsToCenter(this._boundsWorld),this._side=this._getSide(this._boundsWorld)}return r(Tile,[{key:"isReady",value:function(){return this._ready}},{key:"requestTileAsync",value:function(){}},{key:"getQuadcode",value:function(){return this._quadcode}},{key:"getBounds",value:function(){return this._boundsWorld}},{key:"getCenter",value:function(){return this._center}},{key:"getSide",value:function(){return this._side}},{key:"getMesh",value:function(){return this._mesh}},{key:"destroy",value:function(){this._layer=null,this._boundsLatLon=null,this._boundsWorld=null,this._center=null,this._mesh&&(this._mesh.children?this._mesh.children.forEach(function(e){e.geometry.dispose(),e.geometry=null,e.material.map&&(e.material.map.dispose(),e.material.map=null),e.material.dispose(),e.material=null}):(this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.map&&(this._mesh.material.map.dispose(),this._mesh.material.map=null),this._mesh.material.dispose(),this._mesh.material=null))}},{key:"_createMesh",value:function(){}},{key:"_createDebugMesh",value:function(){}},{key:"_getTileURL",value:function(e){return e.s||(s=String.fromCharCode(97+Math.floor(3*Math.random()))),c.lastIndex=0,this._path.replace(c,function(t,n){return e[n]})}},{key:"_quadcodeToTile",value:function(e){for(var t=0,n=0,r=e.length,i=r;i>0;i--){var o=1<<i-1,a=+e[r-i];1===a&&(t|=o),2===a&&(n|=o),3===a&&(t|=o,n|=o)}return[t,n,r]}},{key:"_tileBoundsFromWGS84",value:function(e){var t=this._layer._world.latLonToPoint((0,o["default"])(e[1],e[0])),n=this._layer._world.latLonToPoint((0,o["default"])(e[3],e[2]));return[t.x,t.y,n.x,n.y]}},{key:"_tileBoundsWGS84",value:function(e){var t=this._tile2lon(e[0]+1,e[2]),n=this._tile2lon(e[0],e[2]),r=this._tile2lat(e[1]+1,e[2]),i=this._tile2lat(e[1],e[2]);return[n,r,t,i]}},{key:"_tile2lon",value:function(e,t){return e/Math.pow(2,t)*360-180}},{key:"_tile2lat",value:function(e,t){var n=Math.PI-2*Math.PI*e/Math.pow(2,t);return l*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}},{key:"_boundsToCenter",value:function(e){var t=e[0]+(e[2]-e[0])/2,n=e[1]+(e[3]-e[1])/2;return[t,n]}},{key:"_getSide",value:function(e){return new u["default"].Vector3(e[0],0,e[3]).sub(new u["default"].Vector3(e[0],0,e[1])).length()}}]),Tile}();t["default"]=f,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=_interopRequireDefault(r);BoxHelper=function(e){var t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new i["default"].BufferGeometry;r.setIndex(new i["default"].BufferAttribute(t,1)),r.addAttribute("position",new i["default"].BufferAttribute(n,3)),i["default"].LineSegments.call(this,r,new i["default"].LineBasicMaterial({linewidth:2,color:16711680})),void 0!==e&&this.update(e)},BoxHelper.prototype=Object.create(i["default"].LineSegments.prototype),BoxHelper.prototype.constructor=BoxHelper,BoxHelper.prototype.update=function(){var e=new i["default"].Box3;return function(t){if(e.setFromObject(t),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),t["default"]=BoxHelper,e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=_interopRequireDefault(r);t["default"]=function(e){var t=document.createElement("canvas");t.width=1,t.height=1;var n=t.getContext("2d");n.fillStyle=e,n.fillRect(0,0,t.width,t.height);var r=new i["default"].Texture(t);r.needsUpdate=!0;var o=new i["default"].MeshBasicMaterial({map:r,depthWrite:!1});return o},e.exports=t["default"]},function(e,t,n){function throttle(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError(i);return isObject(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:o,maxWait:t,trailing:a})}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var r=n(49),i="Expected a function";e.exports=throttle},function(e,t){function debounce(e,t,r){function cancel(){l&&clearTimeout(l),o&&clearTimeout(o),f=0,i=o=s=l=c=void 0}function complete(t,n){n&&clearTimeout(n),o=l=c=void 0,t&&(f=d(),a=e.apply(s,i),l||o||(i=s=void 0))}function delayed(){var e=t-(d()-u);0>=e||e>t?complete(c,o):l=setTimeout(delayed,e)}function flush(){return(l&&c||o&&y)&&(a=e.apply(s,i)),cancel(),a}function maxDelayed(){complete(y,l)}function debounced(){if(i=arguments,u=d(),s=this,c=y&&(l||!p),v===!1)var n=p&&!l;else{o||p||(f=u);var r=v-(u-f),h=0>=r||r>v;h?(o&&(o=clearTimeout(o)),f=u,a=e.apply(s,i)):o||(o=setTimeout(maxDelayed,r))}return h&&l?l=clearTimeout(l):l||t===v||(l=setTimeout(delayed,t)),n&&(h=!0,a=e.apply(s,i)),!h||l||o||(i=s=void 0),a}var i,o,a,u,s,l,c,f=0,p=!1,v=!1,y=!0;if("function"!=typeof e)throw new TypeError(n);return t=toNumber(t)||0,isObject(r)&&(p=!!r.leading,v="maxWait"in r&&h(toNumber(r.maxWait)||0,t),y="trailing"in r?!!r.trailing:y),debounced.cancel=cancel,debounced.flush=flush,debounced}function isFunction(e){var t=isObject(e)?p.call(e):"";return t==i||t==o}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function toNumber(e){if(isObject(e)){var t=isFunction(e.valueOf)?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):u.test(e)?r:+e}var n="Expected a function",r=NaN,i="[object Function]",o="[object GeneratorFunction]",a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,f=Object.prototype,p=f.toString,h=Math.max,d=Date.now;e.exports=debounce},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,u=l=void 0}},o=n(34),a=_interopRequireDefault(o),u=n(3),s=_interopRequireDefault(u),l=n(51),c=_interopRequireDefault(l),f=n(48),p=_interopRequireDefault(f),h=n(24),d=(_interopRequireDefault(h),function(e){function TopoJSONTileLayer(e,t){_classCallCheck(this,TopoJSONTileLayer);var n={maxLOD:13,distance:2e3};t=(0,s["default"])(n,t),i(Object.getPrototypeOf(TopoJSONTileLayer.prototype),"constructor",this).call(this,t),this._path=e}return _inherits(TopoJSONTileLayer,e),r(TopoJSONTileLayer,[{key:"_onAdd",value:function(e){var t=this;i(Object.getPrototypeOf(TopoJSONTileLayer.prototype),"_onAdd",this).call(this,e),setTimeout(function(){t._calculateLOD(),t._initEvents()},0)}},{key:"_initEvents",value:function(){this._throttledWorldUpdate=(0,p["default"])(this._onWorldUpdate,100),this._world.on("preUpdate",this._throttledWorldUpdate,this),this._world.on("move",this._onWorldMove,this)}},{key:"_onWorldUpdate",value:function(){this._calculateLOD()}},{key:"_onWorldMove",value:function(e,t){}},{key:"_createTile",value:function(e,t){var n={};return this._options.filter&&(n.filter=this._options.filter),this._options.style&&(n.style=this._options.style),(0,c["default"])(e,this._path,t,n)}},{key:"destroy",value:function(){this._world.off("preUpdate",this._throttledWorldUpdate),this._world.off("move",this._onWorldMove),this._throttledWorldUpdate=null,i(Object.getPrototypeOf(TopoJSONTileLayer.prototype),"destroy",this).call(this)}}]),TopoJSONTileLayer}(a["default"]));t["default"]=function(e,t){return new d(e,t)},e.exports=t["default"]},function(e,t,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,o);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,u=l=void 0}},a=n(45),u=_interopRequireDefault(a),s=n(46),l=(_interopRequireDefault(s),n(24)),c=_interopRequireDefault(l),f=n(52),p=_interopRequireDefault(f),h=n(54),d=_interopRequireDefault(h),v=n(11),y=_interopRequireDefault(v),_=n(10),m=_interopRequireDefault(_),g=n(55),b=_interopRequireDefault(g),x=n(3),w=_interopRequireDefault(x),E=function(e){function TopoJSONTile(e,t,n,r){_classCallCheck(this,TopoJSONTile),o(Object.getPrototypeOf(TopoJSONTile.prototype),"constructor",this).call(this,e,t,n);var i={filter:null,style:{color:"#ff0000"}};this._options=(0,w["default"])(i,r)}return _inherits(TopoJSONTile,e),r(TopoJSONTile,[{key:"requestTileAsync",value:function(){var e=this;setTimeout(function(){e._mesh||(e._mesh=e._createMesh(),e._requestTile())},0)}},{key:"destroy",value:function(){this._abortRequest(),this._request=null,o(Object.getPrototypeOf(TopoJSONTile.prototype),"destroy",this).call(this)}},{key:"_createMesh",value:function(){if(this._center){var e=new c["default"].Object3D;return e.renderOrder=1,e.position.x=this._center[0],e.position.z=this._center[1],e}}},{key:"_createDebugMesh",value:function(){var e=document.createElement("canvas");e.width=256,e.height=256;var t=e.getContext("2d");t.font="Bold 20px Helvetica Neue, Verdana, Arial",t.fillStyle="#ff0000",t.fillText(this._quadcode,20,e.width/2-5),t.fillText(this._tile.toString(),20,e.width/2+25);var n=new c["default"].Texture(e);n.magFilter=c["default"].LinearFilter,n.minFilter=c["default"].LinearMipMapLinearFilter,n.anisotropy=4,n.needsUpdate=!0;var r=new c["default"].MeshBasicMaterial({map:n,transparent:!0,depthWrite:!1}),i=new c["default"].PlaneBufferGeometry(this._side,this._side,1),o=new c["default"].Mesh(i,r);return o.rotation.x=-90*Math.PI/180,o.position.y=.1,o}},{key:"_requestTile",value:function(){var e=this,t={x:this._tile[0],y:this._tile[1],z:this._tile[2]},n=this._getTileURL(t);this._request=(0,p["default"])({url:n,type:"json",crossOrigin:!0}).then(function(t){e._request=null,e._processTileData(t)})["catch"](function(t){console.error(t),e._request=null})}},{key:"_processTileData",value:function(e){var t=this,n=d["default"].feature(e,e.objects.vectile),r=(0,y["default"])(0,0);r.x=-1*this._center[0],r.y=-1*this._center[1];var i,o,a=[],u=[],s=[],l=0,f=new c["default"].Color,p=n.features;this._options.filter&&(p=n.features.filter(this._options.filter));var h=this._options.style;if(p.forEach(function(e){"function"==typeof t._options.style&&(h=t._options.style(e));var n=e.geometry.coordinates;n[0]&&n[0][0]&&Array.isArray(n[0][0])&&(n=n.map(function(e){return e.map(function(e){var n=(0,m["default"])(e[1],e[0]),r=t._layer._world.latLonToPoint(n);return[r.x,r.y]})}),i=t._toEarcut(n),o=t._triangulate(i.vertices,i.holes,i.dimensions),f.set(h.color),a.push(i.vertices),s.push([f.r,f.g,f.b]),u.push(o),l+=o.length)}),0===l)return void(this._ready=!0);for(var v,_,g,b,x=new c["default"].BufferGeometry,w=new Float32Array(9*l),E=new Float32Array(9*l),O=new Float32Array(9*l),M=new c["default"].Vector3,P=new c["default"].Vector3,j=new c["default"].Vector3,R=new c["default"].Vector3,T=new c["default"].Vector3,L=2,D=0,k=0;k<u.length;k++){_=u[k],g=a[k],b=s[k];for(var q=0;q<_.length;q++){v=_[q][0];var C=g[v*L]+r.x,A=0,S=g[v*L+1]+r.y;v=_[q][1];var N=g[v*L]+r.x,U=0,I=g[v*L+1]+r.y;v=_[q][2];var H=g[v*L]+r.x,F=0,z=g[v*L+1]+r.y;M.set(C,A,S),P.set(N,U,I),j.set(H,F,z),R.subVectors(j,P),T.subVectors(M,P),R.cross(T),R.normalize();var W=R.x,B=R.y,V=R.z;w[9*D+0]=C,w[9*D+1]=A,w[9*D+2]=S,E[9*D+0]=W,E[9*D+1]=B,E[9*D+2]=V,O[9*D+0]=b[0],O[9*D+1]=b[1],O[9*D+2]=b[2],w[9*D+3]=N,w[9*D+4]=U,w[9*D+5]=I,E[9*D+3]=W,E[9*D+4]=B,E[9*D+5]=V,O[9*D+3]=b[0],O[9*D+4]=b[1],O[9*D+5]=b[2],w[9*D+6]=H,w[9*D+7]=F,w[9*D+8]=z,E[9*D+6]=W,E[9*D+7]=B,E[9*D+8]=V,O[9*D+6]=b[0],O[9*D+7]=b[1],O[9*D+8]=b[2],D++}}x.addAttribute("position",new c["default"].BufferAttribute(w,3)),x.addAttribute("normal",new c["default"].BufferAttribute(E,3)),x.addAttribute("color",new c["default"].BufferAttribute(O,3)),x.computeBoundingBox();var Z=new c["default"].MeshBasicMaterial({vertexColors:c["default"].VertexColors,side:c["default"].BackSide,depthWrite:!1}),Y=new c["default"].Mesh(x,Z);Y.renderOrder=1,this._mesh.add(Y),this._ready=!0}},{key:"_toEarcut",value:function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;t>a;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},{key:"_triangulate",value:function(e,t,n){var r=(0,b["default"])(e,t,n),o=[];for(i=0,il=r.length;i<il;i+=3)o.push(r.slice(i,i+3));return o}},{key:"_abortRequest",value:function(){this._request&&this._request.abort()}}]),TopoJSONTile}(u["default"]);t["default"]=function(e,t,n,r){return new E(e,t,n,r);
},e.exports=t["default"]},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():(__WEBPACK_AMD_DEFINE_FACTORY__=n,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):e._timedOut?n(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request)))}}function setHeaders(e,t){var n,r=t.headers||{};r.Accept=r.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var i="undefined"!=typeof FormData&&t.data instanceof FormData;t.crossOrigin||r[requestedWith]||(r[requestedWith]=defaultHeaders.requestedWith),r[contentType]||i||(r[contentType]=t.contentType||defaultHeaders.contentType);for(n in r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,r){var i=uniqid++,o=e.jsonpCallback||"callback",a=e.jsonpCallbackName||reqwest.getcallbackPrefix(i),u=new RegExp("((^|\\?|&)"+o+")=([^&]+)"),s=r.match(u),l=doc.createElement("script"),c=0,f=-1!==navigator.userAgent.indexOf("MSIE 10.0");return s?"?"===s[3]?r=r.replace(u,"$1="+a):a=s[3]:r=urlappend(r,o+"="+a),context[a]=generalCallback,l.type="text/javascript",l.src=r,l.async=!0,"undefined"==typeof l.onreadystatechange||f||(l.htmlFor=l.id="_reqwest_"+i),l.onload=l.onreadystatechange=function(){return l[readyState]&&"complete"!==l[readyState]&&"loaded"!==l[readyState]||c?!1:(l.onload=l.onreadystatechange=null,l.onclick&&l.onclick(),t(lastValue),lastValue=void 0,head.removeChild(l),void(c=1))},head.appendChild(l),{abort:function(){l.onload=l.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(l),c=1}}}function getRequest(e,t){var n,r=this.o,i=(r.method||"GET").toUpperCase(),o="string"==typeof r?r:r.url,a=r.processData!==!1&&r.data&&"string"!=typeof r.data?reqwest.toQueryString(r.data):r.data||null,u=!1;return"jsonp"!=r.type&&"GET"!=i||!a||(o=urlappend(o,a),a=null),"jsonp"==r.type?handleJsonp(r,e,t,o):(n=r.xhr&&r.xhr(r)||xhr(r),n.open(i,o,r.async===!1?!1:!0),setHeaders(n,r),setCredentials(n,r),context[xDomainRequest]&&n instanceof context[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},u=!0):n.onreadystatechange=handleReadyState(this,e,t),r.before&&r.before(n),u?setTimeout(function(){n.send(a)},200):n.send(a),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){return null!==e?e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0:void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,r,i,o,a=e.name,u=e.tagName.toLowerCase(),s=function(e){e&&!e.disabled&&t(a,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&a)switch(u){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),r=/radio/i.test(e.type),i=e.value,(!(n||r)||e.checked)&&t(a,normalize(n&&""===i?"on":i)));break;case"textarea":t(a,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())s(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(o=0;e.length&&o<e.length;o++)e.options[o].selected&&s(e.options[o])}}function eachFormElement(){var e,t,n=this,r=function(e,t){var r,i,o;for(r=0;r<t.length;r++)for(o=e[byTag](t[r]),i=0;i<o.length;i++)serial(o[i],n)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),r(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,r){var i,o,a,u=/\[\]$/;if(isArray(t))for(o=0;t&&o<t.length;o++)a=t[o],n||u.test(e)?r(e,a):buildParams(e+"["+("object"==typeof a?o:"")+"]",a,n,r);else if(t&&"[object Object]"===t.toString())for(i in t)buildParams(e+"["+i+"]",t[i],n,r);else r(e,t)}var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=__webpack_require__(53)}catch(ex){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},"catch":function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,r,i=t||!1,o=[],a=encodeURIComponent,u=function(e,t){t="function"==typeof t?t():null==t?"":t,o[o.length]=a(e)+"="+a(t)};if(isArray(e))for(r=0;e&&r<e.length;r++)u(e[r].name,e[r].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],i,u);return o.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})},function(e,t){},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function noop(){}function absolute(e){if(!e)return noop;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,u){u||(t=n=0),e[0]=(t+=e[0])*r+o,e[1]=(n+=e[1])*i+a}}function relative(e){if(!e)return noop;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,u){u||(t=n=0);var s=(e[0]-o)/r|0,l=(e[1]-a)/i|0;e[0]=s-t,e[1]=l-n,t=s,n=l}}function reverse(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function bisect(e,t){for(var n=0,r=e.length;r>n;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function feature(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return feature$1(e,t)})}:feature$1(e,t)}function feature$1(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:object(e,t)};return null==t.id&&delete n.id,n}function object(e,t){function arc(e,t){t.length&&t.pop();for(var i,o=r[0>e?~e:e],a=0,u=o.length;u>a;++a)t.push(i=o[a].slice()),n(i,a);0>e&&reverse(t,u)}function point(e){return e=e.slice(),n(e,0),e}function line(e){for(var t=[],n=0,r=e.length;r>n;++n)arc(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function ring(e){for(var t=line(e);t.length<4;)t.push(t[0].slice());return t}function polygon(e){return e.map(ring)}function geometry(e){var t=e.type;return"GeometryCollection"===t?{type:t,geometries:e.geometries.map(geometry)}:t in i?{type:t,coordinates:i[t](e)}:null}var n=absolute(e.transform),r=e.arcs,i={Point:function(e){return point(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(point)},LineString:function(e){return line(e.arcs)},MultiLineString:function(e){return e.arcs.map(line)},Polygon:function(e){return polygon(e.arcs)},MultiPolygon:function(e){return e.arcs.map(polygon)}};return geometry(t)}function stitchArcs(e,t){function ends(t){var n,r=e.arcs[0>t?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],0>t?[n,i]:[i,n]}function flush(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach(function(e){n[0>e?~e:e]=1}),o.push(i)}}var n={},r={},i={},o=[],a=-1;return t.forEach(function(n,r){var i,o=e.arcs[0>n?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++a],t[a]=n,t[r]=i)}),t.forEach(function(e){var t,n,o=ends(e),a=o[0],u=o[1];if(t=i[a])if(delete i[t.end],t.push(e),t.end=u,n=r[u]){delete r[n.start];var s=n===t?t:t.concat(n);r[s.start=t.start]=i[s.end=n.end]=s}else r[t.start]=i[t.end]=t;else if(t=r[u])if(delete r[t.start],t.unshift(e),t.start=a,n=i[a]){delete i[n.end];var l=n===t?t:n.concat(t);r[l.start=n.start]=i[l.end=t.end]=l}else r[t.start]=i[t.end]=t;else t=[e],r[t.start=a]=i[t.end=u]=t}),flush(i,r),flush(r,i),t.forEach(function(e){n[0>e?~e:e]||o.push([e])}),o}function mesh(e){return object(e,meshArcs.apply(this,arguments))}function meshArcs(e,t,n){function arc(e){var t=0>e?~e:e;(o[t]||(o[t]=[])).push({i:e,g:i})}function line(e){e.forEach(arc)}function polygon(e){e.forEach(line)}function geometry(e){"GeometryCollection"===e.type?e.geometries.forEach(geometry):e.type in a&&(i=e,a[e.type](e.arcs))}var r=[];if(arguments.length>1){var i,o=[],a={LineString:line,MultiLineString:polygon,Polygon:polygon,MultiPolygon:function(e){e.forEach(polygon)}};geometry(t),o.forEach(arguments.length<3?function(e){r.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&r.push(e[0].i)})}else for(var u=0,s=e.arcs.length;s>u;++u)r.push(u);return{type:"MultiLineString",arcs:stitchArcs(e,r)}}function triangle(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function ring(e){for(var t,n=-1,r=e.length,i=e[r-1],o=0;++n<r;)t=i,i=e[n],o+=t[0]*i[1]-t[1]*i[0];return o/2}function merge(e){return object(e,mergeArcs.apply(this,arguments))}function mergeArcs(e,t){function register(e){e.forEach(function(t){t.forEach(function(t){(n[t=0>t?~t:t]||(n[t]=[])).push(e)})}),r.push(e)}function exterior(t){return ring(object(e,{type:"Polygon",arcs:[t]}).coordinates[0])>0}var n={},r=[],i=[];return t.forEach(function(e){"Polygon"===e.type?register(e.arcs):"MultiPolygon"===e.type&&e.arcs.forEach(register)}),r.forEach(function(e){if(!e._){var t=[],r=[e];for(e._=1,i.push(t);e=r.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){n[0>e?~e:e].forEach(function(e){e._||(e._=1,r.push(e))})})})}}),r.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:i.map(function(t){var r,i=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){n[0>e?~e:e].length<2&&i.push(e)})})}),i=stitchArcs(e,i),(r=i.length)>1)for(var o,a=exterior(t[0][0]),u=0;r>u;++u)if(a===exterior(i[u])){o=i[0],i[0]=i[u],i[u]=o;break}return i})}}function neighbors(e){function line(e,n){e.forEach(function(e){0>e&&(e=~e);var r=t[e];r?r.push(n):t[e]=[n]})}function polygon(e,t){e.forEach(function(e){line(e,t)})}function geometry(e,t){"GeometryCollection"===e.type?e.geometries.forEach(function(e){geometry(e,t)}):e.type in r&&r[e.type](e.arcs,t)}var t={},n=e.map(function(){return[]}),r={LineString:line,MultiLineString:polygon,Polygon:polygon,MultiPolygon:function(e,t){e.forEach(function(e){polygon(e,t)})}};e.forEach(geometry);for(var i in t)for(var o=t[i],a=o.length,u=0;a>u;++u)for(var s=u+1;a>s;++s){var l,c=o[u],f=o[s];(l=n[c])[i=bisect(l,f)]!==f&&l.splice(i,0,f),(l=n[f])[i=bisect(l,c)]!==c&&l.splice(i,0,c)}return n}function compareArea(e,t){return e[1][2]-t[1][2]}function minAreaHeap(){function up(e,n){for(;n>0;){var r=(n+1>>1)-1,i=t[r];if(compareArea(e,i)>=0)break;t[i._=n]=i,t[e._=n=r]=e}}function down(e,r){for(;;){var i=r+1<<1,o=i-1,a=r,u=t[a];if(n>o&&compareArea(t[o],u)<0&&(u=t[a=o]),n>i&&compareArea(t[i],u)<0&&(u=t[a=i]),a===r)break;t[u._=r]=u,t[e._=r=a]=e}}var e={},t=[],n=0;return e.push=function(e){return up(t[e._=n]=e,n++),n},e.pop=function(){if(!(0>=n)){var e,r=t[0];return--n>0&&(e=t[n],down(t[e._=0]=e,0)),r}},e.remove=function(e){var r,i=e._;if(t[i]===e)return i!==--n&&(r=t[n],(compareArea(r,e)<0?up:down)(t[r._=i]=r,i)),i},e}function presimplify(e,t){function update(e){i.remove(e),e[1][2]=t(e),i.push(e)}var n=absolute(e.transform),r=relative(e.transform),i=minAreaHeap();return t||(t=triangle),e.arcs.forEach(function(e){var o,a,u,s,l=[],c=0;for(a=0,u=e.length;u>a;++a)s=e[a],n(e[a]=[s[0],s[1],1/0],a);for(a=1,u=e.length-1;u>a;++a)o=e.slice(a-1,a+2),o[1][2]=t(o),l.push(o),i.push(o);for(a=0,u=l.length;u>a;++a)o=l[a],o.previous=l[a-1],o.next=l[a+1];for(;o=i.pop();){var f=o.previous,p=o.next;o[1][2]<c?o[1][2]=c:c=o[1][2],f&&(f.next=p,f[2]=o[2],update(f)),p&&(p.previous=f,p[0]=o[0],update(p))}e.forEach(r)}),e}var t="1.6.24";e.version=t,e.mesh=mesh,e.meshArcs=meshArcs,e.merge=merge,e.mergeArcs=mergeArcs,e.feature=feature,e.neighbors=neighbors,e.presimplify=presimplify})},function(e,t){"use strict";function earcut(e,t,n){n=n||2;var r=t&&t.length,i=r?t[0]*n:e.length,o=linkedList(e,0,i,n,!0),a=[];if(!o)return a;var u,s,l,c,f,p,h;if(r&&(o=eliminateHoles(e,t,o,n)),e.length>80*n){u=l=e[0],s=c=e[1];for(var d=n;i>d;d+=n)f=e[d],p=e[d+1],u>f&&(u=f),s>p&&(s=p),f>l&&(l=f),p>c&&(c=p);h=Math.max(l-u,c-s)}return earcutLinked(o,a,n,u,s,h),a}function linkedList(e,t,n,r,i){var o,a,u,s=0;for(o=t,a=n-r;n>o;o+=r)s+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;if(i===s>0)for(o=t;n>o;o+=r)u=insertNode(o,e[o],e[o+1],u);else for(o=n-r;o>=t;o-=r)u=insertNode(o,e[o],e[o+1],u);return u}function filterPoints(e,t){if(!e)return e;t||(t=e);var n,r=e;do if(n=!1,r.steiner||!equals(r,r.next)&&0!==area(r.prev,r,r.next))r=r.next;else{if(removeNode(r),r=t=r.prev,r===r.next)return null;n=!0}while(n||r!==t);return t}function earcutLinked(e,t,n,r,i,o,a){if(e){!a&&o&&indexCurve(e,r,i,o);for(var u,s,l=e;e.prev!==e.next;)if(u=e.prev,s=e.next,o?isEarHashed(e,r,i,o):isEar(e))t.push(u.i/n),t.push(e.i/n),t.push(s.i/n),removeNode(e),e=s.next,l=s.next;else if(e=s,e===l){a?1===a?(e=cureLocalIntersections(e,t,n),earcutLinked(e,t,n,r,i,o,2)):2===a&&splitEarcut(e,t,n,r,i,o):earcutLinked(filterPoints(e),t,n,r,i,o,1);break}}}function isEar(e){var t=e.prev,n=e,r=e.next;if(area(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(pointInTriangle(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&area(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function isEarHashed(e,t,n,r){var i=e.prev,o=e,a=e.next;if(area(i,o,a)>=0)return!1;for(var u=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,s=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=zOrder(u,s,t,n,r),p=zOrder(l,c,t,n,r),h=e.nextZ;h&&h.z<=p;){if(h!==e.prev&&h!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&area(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=e.prevZ;h&&h.z>=f;){if(h!==e.prev&&h!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&area(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function cureLocalIntersections(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;intersects(i,r,r.next,o)&&locallyInside(i,o)&&locallyInside(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),removeNode(r),removeNode(r.next),r=e=o),r=r.next}while(r!==e);return r}function splitEarcut(e,t,n,r,i,o){var a=e;do{for(var u=a.next.next;u!==a.prev;){if(a.i!==u.i&&isValidDiagonal(a,u)){var s=splitPolygon(a,u);return a=filterPoints(a,a.next),s=filterPoints(s,s.next),earcutLinked(a,t,n,r,i,o),void earcutLinked(s,t,n,r,i,o)}u=u.next}a=a.next}while(a!==e)}function eliminateHoles(e,t,n,r){var i,o,a,u,s,l=[];for(i=0,o=t.length;o>i;i++)a=t[i]*r,u=o-1>i?t[i+1]*r:e.length,s=linkedList(e,a,u,r,!1),s===s.next&&(s.steiner=!0),l.push(getLeftmost(s));for(l.sort(compareX),i=0;i<l.length;i++)eliminateHole(l[i],n),n=filterPoints(n,n.next);return n}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){if(t=findHoleBridge(e,t)){var n=splitPolygon(t,e);filterPoints(n,n.next)}}function findHoleBridge(e,t){var n,r=t,i=e.x,o=e.y,a=-(1/0);do{if(o<=r.y&&o>=r.next.y){var u=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);i>=u&&u>a&&(a=u,n=r.x<r.next.x?r:r.next)}r=r.next}while(r!==t);if(!n)return null;if(e.x===n.x)return n.prev;var s,l=n,c=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=n.x&&pointInTriangle(o<n.y?i:a,o,n.x,n.y,o<n.y?a:i,o,r.x,r.y)&&(s=Math.abs(o-r.y)/(i-r.x),(c>s||s===c&&r.x>n.x)&&locallyInside(r,e)&&(n=r,c=s)),r=r.next;return n}function indexCurve(e,t,n,r){var i=e;do null===i.z&&(i.z=zOrder(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(e){var t,n,r,i,o,a,u,s,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,u=0,t=0;l>t&&(u++,r=r.nextZ,r);t++);for(s=l;u>0||s>0&&r;)0===u?(i=r,r=r.nextZ,s--):0!==s&&r?n.z<=r.z?(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1);return e}function zOrder(e,t,n,r,i){return e=32767*(e-n)/i,t=32767*(t-r)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function getLeftmost(e){var t=e,n=e;do t.x<n.x&&(n=t),t=t.next;while(t!==e);return n}function pointInTriangle(e,t,n,r,i,o,a,u){return(i-a)*(t-u)-(e-a)*(o-u)>=0&&(e-a)*(r-u)-(n-a)*(t-u)>=0&&(n-a)*(o-u)-(i-a)*(r-u)>=0}function isValidDiagonal(e,t){return equals(e,t)||e.next.i!==t.i&&e.prev.i!==t.i&&!intersectsPolygon(e,t)&&locallyInside(e,t)&&locallyInside(t,e)&&middleInside(e,t)}function area(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,n,r){return area(e,t,n)>0!=area(e,t,r)>0&&area(n,r,e)>0!=area(n,r,t)>0}function intersectsPolygon(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&intersects(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function locallyInside(e,t){return area(e.prev,e,e.next)<0?area(e,t,e.next)>=0&&area(e,e.prev,t)>=0:area(e,t,e.prev)<0||area(e,e.next,t)<0}function middleInside(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do n.y>o!=n.next.y>o&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function splitPolygon(e,t){var n=new Node(e.i,e.x,e.y),r=new Node(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function insertNode(e,t,n,r){var i=new Node(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}e.exports=earcut}])});
//# sourceMappingURL=vizicities.min.js.map
